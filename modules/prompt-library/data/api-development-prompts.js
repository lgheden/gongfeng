/**
 * API开发类Prompt数据
 * 包含RESTful API、GraphQL、微服务等API开发相关Prompt模板
 */

var API_DEVELOPMENT_PROMPTS = [
    {
        id: 'restful-api-generator',
        title: 'RESTful API生成器',
        description: '根据业务需求生成完整的RESTful API设计和实现代码',
        category: 'api-development',
        language: 'general',
        difficulty: '中级',
        tags: ['RESTful API', 'API设计', '后端开发'],
        prompt: "6K+35biu5oiR6K6+6K6h5ZKM5a6e546w5LiA5LiqUkVTVGZ1bCBBUEnvvJoKCioq5Lia5Yqh6ZyA5rGC77yaKioKW+ivpue7huaPj+i/sEFQSeeahOS4muWKoeWKn+iDveWSjOeUqOmAlF0KCioq6LWE5rqQ5qih5Z6L77yaKioKW+aPj+i/sOS4u+imgeeahOaVsOaNruaooeWei+WSjOi1hOa6kOWFs+ezu10KCioq5oqA5pyv5qCI77yaKioKLSDlkI7nq6/moYbmnrbvvJpb5aaCRXhwcmVzcy5qc+OAgVNwcmluZyBCb29044CBRGphbmdv562JXQotIOaVsOaNruW6k++8mlvlpoJNeVNRTOOAgU1vbmdvRELjgIFQb3N0Z3JlU1FM562JXQotIOiupOivgeaWueW8j++8mlvlpoJKV1TjgIFPQXV0aDLjgIFBUEkgS2V5562JXQotIOWFtuS7luimgeaxgu+8mlvnvJPlrZjjgIHpmZDmtYHjgIHmlofmoaPnrYldCgoqKkFQSeiuvuiuoeimgeaxgu+8mioqCgoxLiAqKui1hOa6kOiuvuiuoSoqCiAgIC0gUkVTVGZ1bCBVUkzorr7orqEKICAgLSBIVFRQ5pa55rOV5pig5bCECiAgIC0g6LWE5rqQ5YWz57O75aSE55CGCiAgIC0g54mI5pys5o6n5Yi2562W55WlCgoyLiAqKuivt+axguWTjeW6lOagvOW8jyoqCiAgIC0g6K+35rGC5Y+C5pWw6aqM6K+BCiAgIC0g5ZON5bqU5pWw5o2u57uT5p6ECiAgIC0g6ZSZ6K+v5aSE55CG5py65Yi2CiAgIC0g54q25oCB56CB6KeE6IyDCgozLiAqKuWuieWFqOaAp+iuvuiuoSoqCiAgIC0g6Lqr5Lu96K6k6K+BCiAgIC0g5p2D6ZmQ5o6n5Yi2CiAgIC0g5pWw5o2u6aqM6K+BCiAgIC0g5a6J5YWo5aS06K6+572uCgo0LiAqKuaAp+iDveS8mOWMlioqCiAgIC0g5YiG6aG15aSE55CGCiAgIC0g57yT5a2Y562W55WlCiAgIC0g5p+l6K+i5LyY5YyWCiAgIC0g6ZmQ5rWB5py65Yi2Cgo1LiAqKuaWh+aho+WSjOa1i+ivlSoqCiAgIC0gQVBJ5paH5qGj55Sf5oiQCiAgIC0g5Y2V5YWD5rWL6K+VCiAgIC0g6ZuG5oiQ5rWL6K+VCiAgIC0g5oCn6IO95rWL6K+VCgoqKui+k+WHuuWGheWuue+8mioqCi0g5a6M5pW055qEQVBJ6K6+6K6h5paH5qGjCi0g5a6e546w5Luj56CB77yI5o6n5Yi25Zmo44CB5qih5Z6L44CB6Lev55Sx77yJCi0g5pWw5o2u5bqT6K6+6K6hCiAtIOiupOivgeS4remXtOS7tgotIEFQSeaWh+ahowotIOa1i+ivleeUqOS+iwotIOmDqOe9sumFjee9rg==",
        examples: [
            {
                title: 'Node.js Express用户管理API示例',
                code: "Ly8g55So5oi3566h55CGQVBJ5a6M5pW05a6e546wCgovLyAxLiDmlbDmja7mqKHlnovlrprkuYkgKG1vZGVscy9Vc2VyLmpzKQpjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7CmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7CmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpOwoKY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgdXNlcm5hbWU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAn55So5oi35ZCN5piv5b+F6ZyA55qEJ10sCiAgICAgICAgdW5pcXVlOiB0cnVlLAogICAgICAgIHRyaW06IHRydWUsCiAgICAgICAgbWlubGVuZ3RoOiBbMywgJ+eUqOaIt+WQjeiHs+WwkTPkuKrlrZfnrKYnXSwKICAgICAgICBtYXhsZW5ndGg6IFszMCwgJ+eUqOaIt+WQjeacgOWkmjMw5Liq5a2X56ymJ10KICAgIH0sCiAgICBlbWFpbDogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogW3RydWUsICfpgq7nrrHmmK/lv4XpnIDnmoQnXSwKICAgICAgICB1bmlxdWU6IHRydWUsCiAgICAgICAgbG93ZXJjYXNlOiB0cnVlLAogICAgICAgIHZhbGlkYXRlOiB7CiAgICAgICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24oZW1haWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiAvXlteXHNAXStAW15cc0BdK1wuW15cc0BdKyQvLnRlc3QoZW1haWwpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35o+Q5L6b5pyJ5pWI55qE6YKu566x5Zyw5Z2AJwogICAgICAgIH0KICAgIH0sCiAgICBwYXNzd29yZDogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogW3RydWUsICflr4bnoIHmmK/lv4XpnIDnmoQnXSwKICAgICAgICBtaW5sZW5ndGg6IFs2LCAn5a+G56CB6Iez5bCRNuS4quWtl+espiddLAogICAgICAgIHNlbGVjdDogZmFsc2UgLy8g6buY6K6k5LiN6L+U5Zue5a+G56CB5a2X5q61CiAgICB9LAogICAgcHJvZmlsZTogewogICAgICAgIGZpcnN0TmFtZTogU3RyaW5nLAogICAgICAgIGxhc3ROYW1lOiBTdHJpbmcsCiAgICAgICAgYXZhdGFyOiBTdHJpbmcsCiAgICAgICAgYmlvOiBTdHJpbmcsCiAgICAgICAgcGhvbmU6IFN0cmluZwogICAgfSwKICAgIHJvbGU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgZW51bTogWyd1c2VyJywgJ2FkbWluJywgJ21vZGVyYXRvciddLAogICAgICAgIGRlZmF1bHQ6ICd1c2VyJwogICAgfSwKICAgIGlzQWN0aXZlOiB7CiAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgbGFzdExvZ2luOiBEYXRlLAogICAgY3JlYXRlZEF0OiB7CiAgICAgICAgdHlwZTogRGF0ZSwKICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdwogICAgfSwKICAgIHVwZGF0ZWRBdDogewogICAgICAgIHR5cGU6IERhdGUsCiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3cKICAgIH0KfSwgewogICAgdGltZXN0YW1wczogdHJ1ZSwKICAgIHRvSlNPTjogeyB2aXJ0dWFsczogdHJ1ZSB9LAogICAgdG9PYmplY3Q6IHsgdmlydHVhbHM6IHRydWUgfQp9KTsKCi8vIOiZmuaLn+Wtl+autQp1c2VyU2NoZW1hLnZpcnR1YWwoJ2Z1bGxOYW1lJykuZ2V0KGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFxgXCR7dGhpcy5wcm9maWxlLmZpcnN0TmFtZSB8fCAnJ30gXCR7dGhpcy5wcm9maWxlLmxhc3ROYW1lIHx8ICcnfVxgLnRyaW0oKTsKfSk7CgovLyDlr4bnoIHliqDlr4bkuK3pl7Tku7YKdXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7CiAgICBpZiAoIXRoaXMuaXNNb2RpZmllZCgncGFzc3dvcmQnKSkgcmV0dXJuIG5leHQoKTsKICAgIAogICAgdHJ5IHsKICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTIpOwogICAgICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBzYWx0KTsKICAgICAgICBuZXh0KCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIG5leHQoZXJyb3IpOwogICAgfQp9KTsKCi8vIOabtOaWsOaXtumXtOS4remXtOS7tgp1c2VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHsKICAgIHRoaXMudXBkYXRlZEF0ID0gRGF0ZS5ub3coKTsKICAgIG5leHQoKTsKfSk7CgovLyDlrp7kvovmlrnms5UKdXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkKSB7CiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHRoaXMucGFzc3dvcmQpOwp9OwoKdXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlQXV0aFRva2VuID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gand0LnNpZ24oCiAgICAgICAgeyAKICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLCAKICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsIAogICAgICAgICAgICByb2xlOiB0aGlzLnJvbGUgCiAgICAgICAgfSwKICAgICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULAogICAgICAgIHsgZXhwaXJlc0luOiBwcm9jZXNzLmVudi5KV1RfRVhQSVJFU19JTiB8fCAnN2QnIH0KICAgICk7Cn07Cgp1c2VyU2NoZW1hLm1ldGhvZHMudG9TYWZlT2JqZWN0ID0gZnVuY3Rpb24oKSB7CiAgICBjb25zdCB1c2VyT2JqZWN0ID0gdGhpcy50b09iamVjdCgpOwogICAgZGVsZXRlIHVzZXJPYmplY3QucGFzc3dvcmQ7CiAgICByZXR1cm4gdXNlck9iamVjdDsKfTsKCi8vIOmdmeaAgeaWueazlQp1c2VyU2NoZW1hLnN0YXRpY3MuZmluZEJ5Q3JlZGVudGlhbHMgPSBhc3luYyBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpIHsKICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyBlbWFpbCwgaXNBY3RpdmU6IHRydWUgfSkuc2VsZWN0KCcrcGFzc3dvcmQnKTsKICAgIAogICAgaWYgKCF1c2VyIHx8ICEoYXdhaXQgdXNlci5jb21wYXJlUGFzc3dvcmQocGFzc3dvcmQpKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcign6YKu566x5oiW5a+G56CB6ZSZ6K+vJyk7CiAgICB9CiAgICAKICAgIHVzZXIubGFzdExvZ2luID0gbmV3IERhdGUoKTsKICAgIGF3YWl0IHVzZXIuc2F2ZSgpOwogICAgCiAgICByZXR1cm4gdXNlcjsKfTsKCm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTsKCi8vIDIuIOiupOivgeS4remXtOS7tiAobWlkZGxld2FyZS9hdXRoLmpzKQpjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTsKY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7CmNvbnN0IHsgQXBwRXJyb3IgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2Vycm9ySGFuZGxlcicpOwoKY29uc3QgYXV0aGVudGljYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcignQXV0aG9yaXphdGlvbicpPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpOwogICAgICAgIAogICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwcEVycm9yKCforr/pl67ku6TniYznvLrlpLEnLCA0MDEpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpOwogICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQuaWQpOwogICAgICAgIAogICAgICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkgewogICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBwRXJyb3IoJ+eUqOaIt+S4jeWtmOWcqOaIluW3suiiq+emgeeUqCcsIDQwMSkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXEudXNlciA9IHVzZXI7CiAgICAgICAgbmV4dCgpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykgewogICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBwRXJyb3IoJ+aXoOaViOeahOiuv+mXruS7pOeJjCcsIDQwMSkpOwogICAgICAgIH0KICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykgewogICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBwRXJyb3IoJ+iuv+mXruS7pOeJjOW3sui/h+acnycsIDQwMSkpOwogICAgICAgIH0KICAgICAgICBuZXh0KGVycm9yKTsKICAgIH0KfTsKCmNvbnN0IGF1dGhvcml6ZSA9ICguLi5yb2xlcykgPT4gewogICAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4gewogICAgICAgIGlmICghcm9sZXMuaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHsKICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEFwcEVycm9yKCfmnYPpmZDkuI3otrMnLCA0MDMpKTsKICAgICAgICB9CiAgICAgICAgbmV4dCgpOwogICAgfTsKfTsKCm1vZHVsZS5leHBvcnRzID0geyBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZSB9OwoKLy8gMy4g55So5oi35o6n5Yi25ZmoIChjb250cm9sbGVycy91c2VyQ29udHJvbGxlci5qcykKY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7CmNvbnN0IHsgQXBwRXJyb3IsIGNhdGNoQXN5bmMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2Vycm9ySGFuZGxlcicpOwpjb25zdCB7IHZhbGlkYXRpb25SZXN1bHQgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7CgpjbGFzcyBVc2VyQ29udHJvbGxlciB7CiAgICAvLyDojrflj5bnlKjmiLfliJfooagKICAgIHN0YXRpYyBnZXRVc2VycyA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgICBwYWdlID0gMSwKICAgICAgICAgICAgbGltaXQgPSAxMCwKICAgICAgICAgICAgc29ydCA9ICctY3JlYXRlZEF0JywKICAgICAgICAgICAgc2VhcmNoLAogICAgICAgICAgICByb2xlLAogICAgICAgICAgICBpc0FjdGl2ZQogICAgICAgIH0gPSByZXEucXVlcnk7CiAgICAgICAgCiAgICAgICAgLy8g5p6E5bu65p+l6K+i5p2h5Lu2CiAgICAgICAgY29uc3QgcXVlcnkgPSB7fTsKICAgICAgICAKICAgICAgICBpZiAoc2VhcmNoKSB7CiAgICAgICAgICAgIHF1ZXJ5LiRvciA9IFsKICAgICAgICAgICAgICAgIHsgdXNlcm5hbWU6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LAogICAgICAgICAgICAgICAgeyBlbWFpbDogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sCiAgICAgICAgICAgICAgICB7ICdwcm9maWxlLmZpcnN0TmFtZSc6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LAogICAgICAgICAgICAgICAgeyAncHJvZmlsZS5sYXN0TmFtZSc6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9CiAgICAgICAgICAgIF07CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChyb2xlKSBxdWVyeS5yb2xlID0gcm9sZTsKICAgICAgICBpZiAoaXNBY3RpdmUgIT09IHVuZGVmaW5lZCkgcXVlcnkuaXNBY3RpdmUgPSBpc0FjdGl2ZSA9PT0gJ3RydWUnOwogICAgICAgIAogICAgICAgIC8vIOWIhumhteWSjOaOkuW6jwogICAgICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7CiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQocXVlcnkpCiAgICAgICAgICAgIC5zb3J0KHNvcnQpCiAgICAgICAgICAgIC5za2lwKHNraXApCiAgICAgICAgICAgIC5saW1pdChwYXJzZUludChsaW1pdCkpCiAgICAgICAgICAgIC5zZWxlY3QoJy1wYXNzd29yZCcpOwogICAgICAgIAogICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgVXNlci5jb3VudERvY3VtZW50cyhxdWVyeSk7CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICB1c2VyczogdXNlcnMubWFwKHVzZXIgPT4gdXNlci50b1NhZmVPYmplY3QoKSksCiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogcGFyc2VJbnQocGFnZSksCiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSwKICAgICAgICAgICAgICAgICAgICB0b3RhbCwKICAgICAgICAgICAgICAgICAgICBoYXNOZXh0OiBwYWdlICogbGltaXQgPCB0b3RhbCwKICAgICAgICAgICAgICAgICAgICBoYXNQcmV2OiBwYWdlID4gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKICAgIAogICAgLy8g6I635Y+W5Y2V5Liq55So5oi3CiAgICBzdGF0aWMgZ2V0VXNlciA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtczsKICAgICAgICAKICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7CiAgICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcign55So5oi35LiN5a2Y5ZyoJywgNDA0KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBkYXRhOiB7IHVzZXI6IHVzZXIudG9TYWZlT2JqZWN0KCkgfQogICAgICAgIH0pOwogICAgfSk7CiAgICAKICAgIC8vIOWIm+W7uueUqOaItwogICAgc3RhdGljIGNyZWF0ZVVzZXIgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgICAgIC8vIOmqjOivgei+k+WFpQogICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTsKICAgICAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCfovpPlhaXpqozor4HlpLHotKUnLCA0MDAsIGVycm9ycy5hcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgdXNlckRhdGEgPSByZXEuYm9keTsKICAgICAgICAKICAgICAgICAvLyDmo4Dmn6XnlKjmiLflkI3lkozpgq7nrrHmmK/lkKblt7LlrZjlnKgKICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoewogICAgICAgICAgICAkb3I6IFsKICAgICAgICAgICAgICAgIHsgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lIH0sCiAgICAgICAgICAgICAgICB7IGVtYWlsOiB1c2VyRGF0YS5lbWFpbCB9CiAgICAgICAgICAgIF0KICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcign55So5oi35ZCN5oiW6YKu566x5bey5a2Y5ZyoJywgNDA5KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHVzZXJEYXRhKTsKICAgICAgICBhd2FpdCB1c2VyLnNhdmUoKTsKICAgICAgICAKICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7CiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnlKjmiLfliJvlu7rmiJDlip8nLAogICAgICAgICAgICBkYXRhOiB7IHVzZXI6IHVzZXIudG9TYWZlT2JqZWN0KCkgfQogICAgICAgIH0pOwogICAgfSk7CiAgICAKICAgIC8vIOabtOaWsOeUqOaItwogICAgc3RhdGljIHVwZGF0ZVVzZXIgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7CiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHJlcS5ib2R5OwogICAgICAgIAogICAgICAgIC8vIOmqjOivgei+k+WFpQogICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTsKICAgICAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCfovpPlhaXpqozor4HlpLHotKUnLCA0MDAsIGVycm9ycy5hcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8g5LiN5YWB6K6455u05o6l5pu05paw5a+G56CBCiAgICAgICAgZGVsZXRlIHVwZGF0ZXMucGFzc3dvcmQ7CiAgICAgICAgCiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB7ICRzZXQ6IHVwZGF0ZXMgfSwKICAgICAgICAgICAgeyBuZXc6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWUgfQogICAgICAgICk7CiAgICAgICAgCiAgICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcign55So5oi35LiN5a2Y5ZyoJywgNDA0KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn55So5oi35pu05paw5oiQ5YqfJywKICAgICAgICAgICAgZGF0YTogeyB1c2VyOiB1c2VyLnRvU2FmZU9iamVjdCgpIH0KICAgICAgICB9KTsKICAgIH0pOwogICAgCiAgICAvLyDliKDpmaTnlKjmiLfvvIjova/liKDpmaTvvIkKICAgIHN0YXRpYyBkZWxldGVVc2VyID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHsKICAgICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOwogICAgICAgIAogICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKAogICAgICAgICAgICBpZCwKICAgICAgICAgICAgeyBpc0FjdGl2ZTogZmFsc2UgfSwKICAgICAgICAgICAgeyBuZXc6IHRydWUgfQogICAgICAgICk7CiAgICAgICAgCiAgICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcign55So5oi35LiN5a2Y5ZyoJywgNDA0KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn55So5oi35Yig6Zmk5oiQ5YqfJwogICAgICAgIH0pOwogICAgfSk7CiAgICAKICAgIC8vIOeUqOaIt+azqOWGjAogICAgc3RhdGljIHJlZ2lzdGVyID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHsKICAgICAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7CiAgICAgICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBBcHBFcnJvcign6L6T5YWl6aqM6K+B5aSx6LSlJywgNDAwLCBlcnJvcnMuYXJyYXkoKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcHJvZmlsZSB9ID0gcmVxLmJvZHk7CiAgICAgICAgCiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHsKICAgICAgICAgICAgdXNlcm5hbWUsCiAgICAgICAgICAgIGVtYWlsLAogICAgICAgICAgICBwYXNzd29yZCwKICAgICAgICAgICAgcHJvZmlsZQogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpOwogICAgICAgIGNvbnN0IHRva2VuID0gdXNlci5nZW5lcmF0ZUF1dGhUb2tlbigpOwogICAgICAgIAogICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsKICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+azqOWGjOaIkOWKnycsCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIudG9TYWZlT2JqZWN0KCksCiAgICAgICAgICAgICAgICB0b2tlbgogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKICAgIAogICAgLy8g55So5oi355m75b2VCiAgICBzdGF0aWMgbG9naW4gPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTsKICAgICAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCfovpPlhaXpqozor4HlpLHotKUnLCA0MDAsIGVycm9ycy5hcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5OwogICAgICAgIAogICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUNyZWRlbnRpYWxzKGVtYWlsLCBwYXNzd29yZCk7CiAgICAgICAgY29uc3QgdG9rZW4gPSB1c2VyLmdlbmVyYXRlQXV0aFRva2VuKCk7CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn55m75b2V5oiQ5YqfJywKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgdXNlcjogdXNlci50b1NhZmVPYmplY3QoKSwKICAgICAgICAgICAgICAgIHRva2VuCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwogICAgCiAgICAvLyDojrflj5blvZPliY3nlKjmiLfkv6Hmga8KICAgIHN0YXRpYyBnZXRQcm9maWxlID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHsKICAgICAgICByZXMuanNvbih7CiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgICAgICAgIGRhdGE6IHsgdXNlcjogcmVxLnVzZXIudG9TYWZlT2JqZWN0KCkgfQogICAgICAgIH0pOwogICAgfSk7CiAgICAKICAgIC8vIOabtOaWsOW9k+WJjeeUqOaIt+S/oeaBrwogICAgc3RhdGljIHVwZGF0ZVByb2ZpbGUgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTsKICAgICAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCfovpPlhaXpqozor4HlpLHotKUnLCA0MDAsIGVycm9ycy5hcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHJlcS5ib2R5OwogICAgICAgIGRlbGV0ZSB1cGRhdGVzLnBhc3N3b3JkOyAvLyDkuI3lhYHorrjpgJrov4fmraTmjqXlj6Pmm7TmlrDlr4bnoIEKICAgICAgICBkZWxldGUgdXBkYXRlcy5yb2xlOyAvLyDkuI3lhYHorrjnlKjmiLfoh6rlt7Hmm7TmlLnop5LoibIKICAgICAgICAKICAgICAgICBPYmplY3QuYXNzaWduKHJlcS51c2VyLCB1cGRhdGVzKTsKICAgICAgICBhd2FpdCByZXEudXNlci5zYXZlKCk7CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn5Liq5Lq65L+h5oGv5pu05paw5oiQ5YqfJywKICAgICAgICAgICAgZGF0YTogeyB1c2VyOiByZXEudXNlci50b1NhZmVPYmplY3QoKSB9CiAgICAgICAgfSk7CiAgICB9KTsKICAgIAogICAgLy8g5L+u5pS55a+G56CBCiAgICBzdGF0aWMgY2hhbmdlUGFzc3dvcmQgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTsKICAgICAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCfovpPlhaXpqozor4HlpLHotKUnLCA0MDAsIGVycm9ycy5hcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgeyBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTsKICAgICAgICAKICAgICAgICAvLyDojrflj5bljIXlkKvlr4bnoIHnmoTnlKjmiLfkv6Hmga8KICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEudXNlci5faWQpLnNlbGVjdCgnK3Bhc3N3b3JkJyk7CiAgICAgICAgCiAgICAgICAgLy8g6aqM6K+B5b2T5YmN5a+G56CBCiAgICAgICAgaWYgKCEoYXdhaXQgdXNlci5jb21wYXJlUGFzc3dvcmQoY3VycmVudFBhc3N3b3JkKSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKCflvZPliY3lr4bnoIHplJnor68nLCA0MDApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB1c2VyLnBhc3N3b3JkID0gbmV3UGFzc3dvcmQ7CiAgICAgICAgYXdhaXQgdXNlci5zYXZlKCk7CiAgICAgICAgCiAgICAgICAgcmVzLmpzb24oewogICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn5a+G56CB5L+u5pS55oiQ5YqfJwogICAgICAgIH0pOwogICAgfSk7Cn0KCm1vZHVsZS5leHBvcnRzID0gVXNlckNvbnRyb2xsZXI7CgovLyA0LiDot6/nlLHlrprkuYkgKHJvdXRlcy91c2VyUm91dGVzLmpzKQpjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpOwpjb25zdCB7IGJvZHkgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7CmNvbnN0IFVzZXJDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXInKTsKY29uc3QgeyBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZSB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoJyk7CmNvbnN0IHJhdGVMaW1pdCA9IHJlcXVpcmUoJ2V4cHJlc3MtcmF0ZS1saW1pdCcpOwoKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKCi8vIOmZkOa1gemFjee9rgpjb25zdCBhdXRoTGltaXRlciA9IHJhdGVMaW1pdCh7CiAgICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE15YiG6ZKfCiAgICBtYXg6IDUsIC8vIOacgOWkmjXmrKHlsJ3or5UKICAgIG1lc3NhZ2U6IHsKICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICBtZXNzYWdlOiAn55m75b2V5bCd6K+V5qyh5pWw6L+H5aSa77yM6K+3MTXliIbpkp/lkI7lho3or5UnCiAgICB9Cn0pOwoKLy8g6aqM6K+B6KeE5YiZCmNvbnN0IHJlZ2lzdGVyVmFsaWRhdGlvbiA9IFsKICAgIGJvZHkoJ3VzZXJuYW1lJykKICAgICAgICAuaXNMZW5ndGgoeyBtaW46IDMsIG1heDogMzAgfSkKICAgICAgICAud2l0aE1lc3NhZ2UoJ+eUqOaIt+WQjemVv+W6puW/hemhu+WcqDMtMzDkuKrlrZfnrKbkuYvpl7QnKQogICAgICAgIC5tYXRjaGVzKC9eW2EtekEtWjAtOV9dKyQvKQogICAgICAgIC53aXRoTWVzc2FnZSgn55So5oi35ZCN5Y+q6IO95YyF5ZCr5a2X5q+N44CB5pWw5a2X5ZKM5LiL5YiS57q/JyksCiAgICBib2R5KCdlbWFpbCcpCiAgICAgICAgLmlzRW1haWwoKQogICAgICAgIC53aXRoTWVzc2FnZSgn6K+35o+Q5L6b5pyJ5pWI55qE6YKu566x5Zyw5Z2AJykKICAgICAgICAubm9ybWFsaXplRW1haWwoKSwKICAgIGJvZHkoJ3Bhc3N3b3JkJykKICAgICAgICAuaXNMZW5ndGgoeyBtaW46IDYgfSkKICAgICAgICAud2l0aE1lc3NhZ2UoJ+WvhueggeiHs+WwkTbkuKrlrZfnrKYnKQogICAgICAgIC5tYXRjaGVzKC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXGQpLykKICAgICAgICAud2l0aE1lc3NhZ2UoJ+WvhueggeW/hemhu+WMheWQq+Wkp+Wwj+WGmeWtl+avjeWSjOaVsOWtlycpCl07Cgpjb25zdCBsb2dpblZhbGlkYXRpb24gPSBbCiAgICBib2R5KCdlbWFpbCcpLmlzRW1haWwoKS53aXRoTWVzc2FnZSgn6K+35o+Q5L6b5pyJ5pWI55qE6YKu566x5Zyw5Z2AJyksCiAgICBib2R5KCdwYXNzd29yZCcpLm5vdEVtcHR5KCkud2l0aE1lc3NhZ2UoJ+WvhueggeS4jeiDveS4uuepuicpCl07CgovLyDlhazlvIDot6/nlLEKcm91dGVyLnBvc3QoJy9yZWdpc3RlcicsIHJlZ2lzdGVyVmFsaWRhdGlvbiwgVXNlckNvbnRyb2xsZXIucmVnaXN0ZXIpOwpyb3V0ZXIucG9zdCgnL2xvZ2luJywgYXV0aExpbWl0ZXIsIGxvZ2luVmFsaWRhdGlvbiwgVXNlckNvbnRyb2xsZXIubG9naW4pOwoKLy8g6ZyA6KaB6K6k6K+B55qE6Lev55SxCnJvdXRlci51c2UoYXV0aGVudGljYXRlKTsKCi8vIOeUqOaIt+S4quS6uuS/oeaBr+i3r+eUsQpyb3V0ZXIuZ2V0KCcvcHJvZmlsZScsIFVzZXJDb250cm9sbGVyLmdldFByb2ZpbGUpOwpyb3V0ZXIucHV0KCcvcHJvZmlsZScsIFsKICAgIGJvZHkoJ3Byb2ZpbGUuZmlyc3ROYW1lJykub3B0aW9uYWwoKS5pc0xlbmd0aCh7IG1heDogNTAgfSksCiAgICBib2R5KCdwcm9maWxlLmxhc3ROYW1lJykub3B0aW9uYWwoKS5pc0xlbmd0aCh7IG1heDogNTAgfSksCiAgICBib2R5KCdwcm9maWxlLnBob25lJykub3B0aW9uYWwoKS5pc01vYmlsZVBob25lKCd6aC1DTicpCl0sIFVzZXJDb250cm9sbGVyLnVwZGF0ZVByb2ZpbGUpOwoKcm91dGVyLnB1dCgnL2NoYW5nZS1wYXNzd29yZCcsIFsKICAgIGJvZHkoJ2N1cnJlbnRQYXNzd29yZCcpLm5vdEVtcHR5KCkud2l0aE1lc3NhZ2UoJ+W9k+WJjeWvhueggeS4jeiDveS4uuepuicpLAogICAgYm9keSgnbmV3UGFzc3dvcmQnKQogICAgICAgIC5pc0xlbmd0aCh7IG1pbjogNiB9KQogICAgICAgIC53aXRoTWVzc2FnZSgn5paw5a+G56CB6Iez5bCRNuS4quWtl+espicpCiAgICAgICAgLm1hdGNoZXMoL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcZCkvKQogICAgICAgIC53aXRoTWVzc2FnZSgn5paw5a+G56CB5b+F6aG75YyF5ZCr5aSn5bCP5YaZ5a2X5q+N5ZKM5pWw5a2XJykKXSwgVXNlckNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpOwoKLy8g566h55CG5ZGY6Lev55SxCnJvdXRlci51c2UoYXV0aG9yaXplKCdhZG1pbicsICdtb2RlcmF0b3InKSk7Cgpyb3V0ZXIuZ2V0KCcvJywgVXNlckNvbnRyb2xsZXIuZ2V0VXNlcnMpOwpyb3V0ZXIuZ2V0KCcvOmlkJywgVXNlckNvbnRyb2xsZXIuZ2V0VXNlcik7CnJvdXRlci5wb3N0KCcvJywgcmVnaXN0ZXJWYWxpZGF0aW9uLCBVc2VyQ29udHJvbGxlci5jcmVhdGVVc2VyKTsKcm91dGVyLnB1dCgnLzppZCcsIFsKICAgIGJvZHkoJ3VzZXJuYW1lJykub3B0aW9uYWwoKS5pc0xlbmd0aCh7IG1pbjogMywgbWF4OiAzMCB9KSwKICAgIGJvZHkoJ2VtYWlsJykub3B0aW9uYWwoKS5pc0VtYWlsKCkubm9ybWFsaXplRW1haWwoKSwKICAgIGJvZHkoJ3JvbGUnKS5vcHRpb25hbCgpLmlzSW4oWyd1c2VyJywgJ2FkbWluJywgJ21vZGVyYXRvciddKQpdLCBVc2VyQ29udHJvbGxlci51cGRhdGVVc2VyKTsKcm91dGVyLmRlbGV0ZSgnLzppZCcsIFVzZXJDb250cm9sbGVyLmRlbGV0ZVVzZXIpOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7CgovLyA1LiDplJnor6/lpITnkIblt6XlhbcgKHV0aWxzL2Vycm9ySGFuZGxlci5qcykKY2xhc3MgQXBwRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlLCBkZXRhaWxzID0gbnVsbCkgewogICAgICAgIHN1cGVyKG1lc3NhZ2UpOwogICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7CiAgICAgICAgdGhpcy5zdGF0dXMgPSBcYFwke3N0YXR1c0NvZGV9XGAuc3RhcnRzV2l0aCgnNCcpID8gJ2ZhaWwnIDogJ2Vycm9yJzsKICAgICAgICB0aGlzLmlzT3BlcmF0aW9uYWwgPSB0cnVlOwogICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7CiAgICAgICAgCiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7CiAgICB9Cn0KCmNvbnN0IGNhdGNoQXN5bmMgPSAoZm4pID0+IHsKICAgIHJldHVybiAocmVxLCByZXMsIG5leHQpID0+IHsKICAgICAgICBmbihyZXEsIHJlcywgbmV4dCkuY2F0Y2gobmV4dCk7CiAgICB9Owp9OwoKY29uc3QgZ2xvYmFsRXJyb3JIYW5kbGVyID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHsKICAgIGVyci5zdGF0dXNDb2RlID0gZXJyLnN0YXR1c0NvZGUgfHwgNTAwOwogICAgZXJyLnN0YXR1cyA9IGVyci5zdGF0dXMgfHwgJ2Vycm9yJzsKICAgIAogICAgLy8g5byA5Y+R546v5aKD6L+U5Zue6K+m57uG6ZSZ6K+v5L+h5oGvCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHsKICAgICAgICByZXMuc3RhdHVzKGVyci5zdGF0dXNDb2RlKS5qc29uKHsKICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgIGVycm9yOiBlcnIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLAogICAgICAgICAgICBzdGFjazogZXJyLnN0YWNrLAogICAgICAgICAgICBkZXRhaWxzOiBlcnIuZGV0YWlscwogICAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgICAvLyDnlJ/kuqfnjq/looPlj6rov5Tlm57lv4XopoHkv6Hmga8KICAgICAgICBpZiAoZXJyLmlzT3BlcmF0aW9uYWwpIHsKICAgICAgICAgICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzQ29kZSkuanNvbih7CiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLAogICAgICAgICAgICAgICAgZGV0YWlsczogZXJyLmRldGFpbHMKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRVJST1I6JywgZXJyKTsKICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oewogICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+vJwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IHsgQXBwRXJyb3IsIGNhdGNoQXN5bmMsIGdsb2JhbEVycm9ySGFuZGxlciB9OwoKLy8gNi4g5Li75bqU55So5paH5Lu2IChhcHAuanMpCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7CmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpOwpjb25zdCBjb21wcmVzc2lvbiA9IHJlcXVpcmUoJ2NvbXByZXNzaW9uJyk7CmNvbnN0IG1vbmdvU2FuaXRpemUgPSByZXF1aXJlKCdleHByZXNzLW1vbmdvLXNhbml0aXplJyk7CmNvbnN0IHhzcyA9IHJlcXVpcmUoJ3hzcy1jbGVhbicpOwpjb25zdCBocHAgPSByZXF1aXJlKCdocHAnKTsKY29uc3QgdXNlclJvdXRlcyA9IHJlcXVpcmUoJy4vcm91dGVzL3VzZXJSb3V0ZXMnKTsKY29uc3QgeyBnbG9iYWxFcnJvckhhbmRsZXIgfSA9IHJlcXVpcmUoJy4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7Cgpjb25zdCBhcHAgPSBleHByZXNzKCk7CgovLyDlronlhajkuK3pl7Tku7YKYXBwLnVzZShoZWxtZXQoKSk7CmFwcC51c2UoY29ycyh7CiAgICBvcmlnaW46IHByb2Nlc3MuZW52LkFMTE9XRURfT1JJR0lOUz8uc3BsaXQoJywnKSB8fCBbJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCddLAogICAgY3JlZGVudGlhbHM6IHRydWUKfSkpOwoKLy8g5pWw5o2u6Kej5p6Q5ZKM5Y6L57ypCmFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICcxMG1iJyB9KSk7CmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUsIGxpbWl0OiAnMTBtYicgfSkpOwphcHAudXNlKGNvbXByZXNzaW9uKCkpOwoKLy8g5pWw5o2u5riF55CGCmFwcC51c2UobW9uZ29TYW5pdGl6ZSgpKTsKYXBwLnVzZSh4c3MoKSk7CmFwcC51c2UoaHBwKCkpOwoKLy8gQVBJ6Lev55SxCmFwcC51c2UoJy9hcGkvdjEvdXNlcnMnLCB1c2VyUm91dGVzKTsKCi8vIDQwNOWkhOeQhgphcHAuYWxsKCcqJywgKHJlcSwgcmVzKSA9PiB7CiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7CiAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgbWVzc2FnZTogXGDot6/nlLEgXCR7cmVxLm9yaWdpbmFsVXJsfSDkuI3lrZjlnKhcYAogICAgfSk7Cn0pOwoKLy8g5YWo5bGA6ZSZ6K+v5aSE55CGCmFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTsKCm1vZHVsZS5leHBvcnRzID0gYXBwOw=="
            }
        ]
    },
    {
        id: 'graphql-api-generator',
        title: 'GraphQL API生成器',
        description: '设计和实现GraphQL API，包括Schema定义、Resolver实现和查询优化',
        category: 'api-development',
        language: 'general',
        difficulty: '高级',
        tags: ['GraphQL', 'Schema设计', 'Resolver'],
        prompt: "6K+35biu5oiR6K6+6K6h5ZKM5a6e546w5LiA5LiqR3JhcGhRTCBBUEnvvJoKCioq5Lia5Yqh6ZyA5rGC77yaKioKW+ivpue7huaPj+i/sEdyYXBoUUwgQVBJ55qE5Yqf6IO96ZyA5rGCXQoKKirmlbDmja7mqKHlnovvvJoqKgpb5o+P6L+w5Li76KaB55qE5pWw5o2u5a6e5L2T5ZKM5YWz57O7XQoKKirmioDmnK/moIjvvJoqKgotIEdyYXBoUUzmnI3liqHlmajvvJpb5aaCQXBvbGxvIFNlcnZlcuOAgUdyYXBoUUwgWW9nYeetiV0KLSDmlbDmja7lupPvvJpb5aaCTW9uZ29EQuOAgVBvc3RncmVTUUznrYldCi0g6K6k6K+B5pa55byP77yaW0pXVOOAgU9BdXRoMuetiV0KLSDlhbbku5blt6XlhbfvvJpbRGF0YUxvYWRlcuOAgee8k+WtmOetiV0KCioqR3JhcGhRTOiuvuiuoeimgeaxgu+8mioqCgoxLiAqKlNjaGVtYeiuvuiuoSoqCiAgIC0gVHlwZeWumuS5iQogICAtIFF1ZXJ56K6+6K6hCiAgIC0gTXV0YXRpb27orr7orqEKICAgLSBTdWJzY3JpcHRpb27orr7orqEKICAgLSDovpPlhaXnsbvlnovlrprkuYkKCjIuICoqUmVzb2x2ZXLlrp7njrAqKgogICAtIOafpeivouino+aekOWZqAogICAtIOWPmOabtOino+aekOWZqAogICAtIOWtl+auteino+aekOWZqAogICAtIOmUmeivr+WkhOeQhgoKMy4gKirmgKfog73kvJjljJYqKgogICAtIE4rMeafpeivoumXrumimOino+WGswogICAtIERhdGFMb2FkZXLkvb/nlKgKICAgLSDmn6Xor6LlpI3mnYLluqbpmZDliLYKICAgLSDnvJPlrZjnrZbnlaUKCjQuICoq5a6J5YWo5oCnKioKICAgLSDorqTor4HmjojmnYMKICAgLSDmn6Xor6Lmt7HluqbpmZDliLYKICAgLSDpgJ/njofpmZDliLYKICAgLSDovpPlhaXpqozor4EKCjUuICoq5byA5Y+R5bel5YW3KioKICAgLSBHcmFwaFFMIFBsYXlncm91bmQKICAgLSDmlofmoaPnlJ/miJAKICAgLSDmtYvor5Xlt6XlhbcKICAgLSDnm5HmjqfmlrnmoYgKCioq6L6T5Ye65YaF5a6577yaKioKLSBHcmFwaFFMIFNjaGVtYeWumuS5iQotIFJlc29sdmVy5a6e546w5Luj56CBCi0g5pWw5o2u6K6/6Zeu5bGCCi0g6K6k6K+B5Lit6Ze05Lu2Ci0g5oCn6IO95LyY5YyW5pa55qGICi0g5rWL6K+V55So5L6L",
        examples: [
            {
                title: 'Apollo Server博客系统GraphQL API示例',
                code: "Ly8gR3JhcGhRTOWNmuWuouezu+e7n+WujOaVtOWunueOsAoKLy8gMS4gU2NoZW1h5a6a5LmJIChzY2hlbWEvdHlwZURlZnMuanMpCmNvbnN0IHsgZ3FsIH0gPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyLWV4cHJlc3MnKTsKCmNvbnN0IHR5cGVEZWZzID0gZ3FsXGAKICAjIOagh+mHj+exu+WeiwogIHNjYWxhciBEYXRlCiAgc2NhbGFyIFVwbG9hZAogIAogICMg55So5oi357G75Z6LCiAgdHlwZSBVc2VyIHsKICAgIGlkOiBJRCEKICAgIHVzZXJuYW1lOiBTdHJpbmchCiAgICBlbWFpbDogU3RyaW5nIQogICAgcHJvZmlsZTogVXNlclByb2ZpbGUKICAgIHBvc3RzOiBbUG9zdCFdIQogICAgY29tbWVudHM6IFtDb21tZW50IV0hCiAgICByb2xlOiBVc2VyUm9sZSEKICAgIGlzQWN0aXZlOiBCb29sZWFuIQogICAgY3JlYXRlZEF0OiBEYXRlIQogICAgdXBkYXRlZEF0OiBEYXRlIQogIH0KICAKICB0eXBlIFVzZXJQcm9maWxlIHsKICAgIGZpcnN0TmFtZTogU3RyaW5nCiAgICBsYXN0TmFtZTogU3RyaW5nCiAgICBhdmF0YXI6IFN0cmluZwogICAgYmlvOiBTdHJpbmcKICAgIHdlYnNpdGU6IFN0cmluZwogIH0KICAKICBlbnVtIFVzZXJSb2xlIHsKICAgIFVTRVIKICAgIEFETUlOCiAgICBNT0RFUkFUT1IKICB9CiAgCiAgIyDmlofnq6DnsbvlnosKICB0eXBlIFBvc3QgewogICAgaWQ6IElEIQogICAgdGl0bGU6IFN0cmluZyEKICAgIGNvbnRlbnQ6IFN0cmluZyEKICAgIGV4Y2VycHQ6IFN0cmluZwogICAgc2x1ZzogU3RyaW5nIQogICAgc3RhdHVzOiBQb3N0U3RhdHVzIQogICAgYXV0aG9yOiBVc2VyIQogICAgY2F0ZWdvcmllczogW0NhdGVnb3J5IV0hCiAgICB0YWdzOiBbVGFnIV0hCiAgICBjb21tZW50czogW0NvbW1lbnQhXSEKICAgIGZlYXR1cmVkSW1hZ2U6IFN0cmluZwogICAgdmlld0NvdW50OiBJbnQhCiAgICBsaWtlQ291bnQ6IEludCEKICAgIGNvbW1lbnRDb3VudDogSW50IQogICAgY3JlYXRlZEF0OiBEYXRlIQogICAgdXBkYXRlZEF0OiBEYXRlIQogICAgcHVibGlzaGVkQXQ6IERhdGUKICB9CiAgCiAgZW51bSBQb3N0U3RhdHVzIHsKICAgIERSQUZUCiAgICBQVUJMSVNIRUQKICAgIEFSQ0hJVkVECiAgfQogIAogICMg5YiG57G757G75Z6LCiAgdHlwZSBDYXRlZ29yeSB7CiAgICBpZDogSUQhCiAgICBuYW1lOiBTdHJpbmchCiAgICBzbHVnOiBTdHJpbmchCiAgICBkZXNjcmlwdGlvbjogU3RyaW5nCiAgICBwb3N0czogW1Bvc3QhXSEKICAgIHBvc3RDb3VudDogSW50IQogICAgY3JlYXRlZEF0OiBEYXRlIQogIH0KICAKICAjIOagh+etvuexu+WeiwogIHR5cGUgVGFnIHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIHNsdWc6IFN0cmluZyEKICAgIHBvc3RzOiBbUG9zdCFdIQogICAgcG9zdENvdW50OiBJbnQhCiAgICBjcmVhdGVkQXQ6IERhdGUhCiAgfQogIAogICMg6K+E6K6657G75Z6LCiAgdHlwZSBDb21tZW50IHsKICAgIGlkOiBJRCEKICAgIGNvbnRlbnQ6IFN0cmluZyEKICAgIGF1dGhvcjogVXNlciEKICAgIHBvc3Q6IFBvc3QhCiAgICBwYXJlbnQ6IENvbW1lbnQKICAgIHJlcGxpZXM6IFtDb21tZW50IV0hCiAgICBpc0FwcHJvdmVkOiBCb29sZWFuIQogICAgY3JlYXRlZEF0OiBEYXRlIQogICAgdXBkYXRlZEF0OiBEYXRlIQogIH0KICAKICAjIOi+k+WFpeexu+WeiwogIGlucHV0IFVzZXJJbnB1dCB7CiAgICB1c2VybmFtZTogU3RyaW5nIQogICAgZW1haWw6IFN0cmluZyEKICAgIHBhc3N3b3JkOiBTdHJpbmchCiAgICBwcm9maWxlOiBVc2VyUHJvZmlsZUlucHV0CiAgfQogIAogIGlucHV0IFVzZXJQcm9maWxlSW5wdXQgewogICAgZmlyc3ROYW1lOiBTdHJpbmcKICAgIGxhc3ROYW1lOiBTdHJpbmcKICAgIGJpbzogU3RyaW5nCiAgICB3ZWJzaXRlOiBTdHJpbmcKICB9CiAgCiAgaW5wdXQgUG9zdElucHV0IHsKICAgIHRpdGxlOiBTdHJpbmchCiAgICBjb250ZW50OiBTdHJpbmchCiAgICBleGNlcnB0OiBTdHJpbmcKICAgIHN0YXR1czogUG9zdFN0YXR1cyA9IERSQUZUCiAgICBjYXRlZ29yeUlkczogW0lEIV0hCiAgICB0YWdOYW1lczogW1N0cmluZyFdIQogICAgZmVhdHVyZWRJbWFnZTogVXBsb2FkCiAgfQogIAogIGlucHV0IFBvc3RVcGRhdGVJbnB1dCB7CiAgICB0aXRsZTogU3RyaW5nCiAgICBjb250ZW50OiBTdHJpbmcKICAgIGV4Y2VycHQ6IFN0cmluZwogICAgc3RhdHVzOiBQb3N0U3RhdHVzCiAgICBjYXRlZ29yeUlkczogW0lEIV0KICAgIHRhZ05hbWVzOiBbU3RyaW5nIV0KICAgIGZlYXR1cmVkSW1hZ2U6IFVwbG9hZAogIH0KICAKICBpbnB1dCBDb21tZW50SW5wdXQgewogICAgY29udGVudDogU3RyaW5nIQogICAgcG9zdElkOiBJRCEKICAgIHBhcmVudElkOiBJRAogIH0KICAKICAjIOWIhumhteexu+WeiwogIHR5cGUgUGFnZUluZm8gewogICAgaGFzTmV4dFBhZ2U6IEJvb2xlYW4hCiAgICBoYXNQcmV2aW91c1BhZ2U6IEJvb2xlYW4hCiAgICBzdGFydEN1cnNvcjogU3RyaW5nCiAgICBlbmRDdXJzb3I6IFN0cmluZwogIH0KICAKICB0eXBlIFBvc3RDb25uZWN0aW9uIHsKICAgIGVkZ2VzOiBbUG9zdEVkZ2UhXSEKICAgIHBhZ2VJbmZvOiBQYWdlSW5mbyEKICAgIHRvdGFsQ291bnQ6IEludCEKICB9CiAgCiAgdHlwZSBQb3N0RWRnZSB7CiAgICBub2RlOiBQb3N0IQogICAgY3Vyc29yOiBTdHJpbmchCiAgfQogIAogICMg5p+l6K+i57G75Z6LCiAgdHlwZSBRdWVyeSB7CiAgICAjIOeUqOaIt+afpeivogogICAgbWU6IFVzZXIKICAgIHVzZXIoaWQ6IElEISk6IFVzZXIKICAgIHVzZXJzKGZpcnN0OiBJbnQsIGFmdGVyOiBTdHJpbmcsIHNlYXJjaDogU3RyaW5nKTogVXNlckNvbm5lY3Rpb24hCiAgICAKICAgICMg5paH56ug5p+l6K+iCiAgICBwb3N0KGlkOiBJRCwgc2x1ZzogU3RyaW5nKTogUG9zdAogICAgcG9zdHMoCiAgICAgIGZpcnN0OiBJbnQgPSAxMAogICAgICBhZnRlcjogU3RyaW5nCiAgICAgIHN0YXR1czogUG9zdFN0YXR1cwogICAgICBjYXRlZ29yeUlkOiBJRAogICAgICB0YWdJZDogSUQKICAgICAgYXV0aG9ySWQ6IElECiAgICAgIHNlYXJjaDogU3RyaW5nCiAgICAgIHNvcnRCeTogUG9zdFNvcnRCeSA9IENSRUFURURfQVQKICAgICAgc29ydE9yZGVyOiBTb3J0T3JkZXIgPSBERVNDCiAgICApOiBQb3N0Q29ubmVjdGlvbiEKICAgIAogICAgIyDliIbnsbvlkozmoIfnrb7mn6Xor6IKICAgIGNhdGVnb3JpZXM6IFtDYXRlZ29yeSFdIQogICAgY2F0ZWdvcnkoaWQ6IElELCBzbHVnOiBTdHJpbmcpOiBDYXRlZ29yeQogICAgdGFnczogW1RhZyFdIQogICAgdGFnKGlkOiBJRCwgc2x1ZzogU3RyaW5nKTogVGFnCiAgICAKICAgICMg6K+E6K665p+l6K+iCiAgICBjb21tZW50cyhwb3N0SWQ6IElEISwgZmlyc3Q6IEludCA9IDEwLCBhZnRlcjogU3RyaW5nKTogQ29tbWVudENvbm5lY3Rpb24hCiAgfQogIAogIGVudW0gUG9zdFNvcnRCeSB7CiAgICBDUkVBVEVEX0FUCiAgICBVUERBVEVEX0FUCiAgICBQVUJMSVNIRURfQVQKICAgIFZJRVdfQ09VTlQKICAgIExJS0VfQ09VTlQKICAgIENPTU1FTlRfQ09VTlQKICB9CiAgCiAgZW51bSBTb3J0T3JkZXIgewogICAgQVNDCiAgICBERVNDCiAgfQogIAogICMg5Y+Y5pu057G75Z6LCiAgdHlwZSBNdXRhdGlvbiB7CiAgICAjIOeUqOaIt+iupOivgQogICAgcmVnaXN0ZXIoaW5wdXQ6IFVzZXJJbnB1dCEpOiBBdXRoUGF5bG9hZCEKICAgIGxvZ2luKGVtYWlsOiBTdHJpbmchLCBwYXNzd29yZDogU3RyaW5nISk6IEF1dGhQYXlsb2FkIQogICAgbG9nb3V0OiBCb29sZWFuIQogICAgCiAgICAjIOeUqOaIt+euoeeQhgogICAgdXBkYXRlUHJvZmlsZShpbnB1dDogVXNlclByb2ZpbGVJbnB1dCEpOiBVc2VyIQogICAgY2hhbmdlUGFzc3dvcmQoY3VycmVudFBhc3N3b3JkOiBTdHJpbmchLCBuZXdQYXNzd29yZDogU3RyaW5nISk6IEJvb2xlYW4hCiAgICAKICAgICMg5paH56ug566h55CGCiAgICBjcmVhdGVQb3N0KGlucHV0OiBQb3N0SW5wdXQhKTogUG9zdCEKICAgIHVwZGF0ZVBvc3QoaWQ6IElEISwgaW5wdXQ6IFBvc3RVcGRhdGVJbnB1dCEpOiBQb3N0IQogICAgZGVsZXRlUG9zdChpZDogSUQhKTogQm9vbGVhbiEKICAgIHB1Ymxpc2hQb3N0KGlkOiBJRCEpOiBQb3N0IQogICAgbGlrZVBvc3QoaWQ6IElEISk6IFBvc3QhCiAgICAKICAgICMg6K+E6K66566h55CGCiAgICBjcmVhdGVDb21tZW50KGlucHV0OiBDb21tZW50SW5wdXQhKTogQ29tbWVudCEKICAgIHVwZGF0ZUNvbW1lbnQoaWQ6IElEISwgY29udGVudDogU3RyaW5nISk6IENvbW1lbnQhCiAgICBkZWxldGVDb21tZW50KGlkOiBJRCEpOiBCb29sZWFuIQogICAgYXBwcm92ZUNvbW1lbnQoaWQ6IElEISk6IENvbW1lbnQhCiAgICAKICAgICMg5YiG57G75ZKM5qCH562+566h55CGCiAgICBjcmVhdGVDYXRlZ29yeShuYW1lOiBTdHJpbmchLCBkZXNjcmlwdGlvbjogU3RyaW5nKTogQ2F0ZWdvcnkhCiAgICB1cGRhdGVDYXRlZ29yeShpZDogSUQhLCBuYW1lOiBTdHJpbmcsIGRlc2NyaXB0aW9uOiBTdHJpbmcpOiBDYXRlZ29yeSEKICAgIGRlbGV0ZUNhdGVnb3J5KGlkOiBJRCEpOiBCb29sZWFuIQogIH0KICAKICAjIOiuoumYheexu+WeiwogIHR5cGUgU3Vic2NyaXB0aW9uIHsKICAgIHBvc3RBZGRlZDogUG9zdCEKICAgIHBvc3RVcGRhdGVkKGlkOiBJRCEpOiBQb3N0IQogICAgY29tbWVudEFkZGVkKHBvc3RJZDogSUQhKTogQ29tbWVudCEKICAgIGNvbW1lbnRBcHByb3ZlZChwb3N0SWQ6IElEISk6IENvbW1lbnQhCiAgfQogIAogIHR5cGUgQXV0aFBheWxvYWQgewogICAgdG9rZW46IFN0cmluZyEKICAgIHVzZXI6IFVzZXIhCiAgfQogIAogIHR5cGUgVXNlckNvbm5lY3Rpb24gewogICAgZWRnZXM6IFtVc2VyRWRnZSFdIQogICAgcGFnZUluZm86IFBhZ2VJbmZvIQogICAgdG90YWxDb3VudDogSW50IQogIH0KICAKICB0eXBlIFVzZXJFZGdlIHsKICAgIG5vZGU6IFVzZXIhCiAgICBjdXJzb3I6IFN0cmluZyEKICB9CiAgCiAgdHlwZSBDb21tZW50Q29ubmVjdGlvbiB7CiAgICBlZGdlczogW0NvbW1lbnRFZGdlIV0hCiAgICBwYWdlSW5mbzogUGFnZUluZm8hCiAgICB0b3RhbENvdW50OiBJbnQhCiAgfQogIAogIHR5cGUgQ29tbWVudEVkZ2UgewogICAgbm9kZTogQ29tbWVudCEKICAgIGN1cnNvcjogU3RyaW5nIQogIH0KXGA7Cgptb2R1bGUuZXhwb3J0cyA9IHR5cGVEZWZzOwoKLy8gMi4gUmVzb2x2ZXLlrp7njrAgKHJlc29sdmVycy9pbmRleC5qcykKY29uc3QgeyBBdXRoZW50aWNhdGlvbkVycm9yLCBGb3JiaWRkZW5FcnJvciwgVXNlcklucHV0RXJyb3IgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpOwpjb25zdCB7IGNvbWJpbmVSZXNvbHZlcnMgfSA9IHJlcXVpcmUoJ2dyYXBocWwtcmVzb2x2ZXJzJyk7CmNvbnN0IHsgaXNBdXRoZW50aWNhdGVkLCBpc0FkbWluIH0gPSByZXF1aXJlKCcuL2F1dGhvcml6YXRpb24nKTsKY29uc3QgdXNlclJlc29sdmVycyA9IHJlcXVpcmUoJy4vdXNlclJlc29sdmVycycpOwpjb25zdCBwb3N0UmVzb2x2ZXJzID0gcmVxdWlyZSgnLi9wb3N0UmVzb2x2ZXJzJyk7CmNvbnN0IGNvbW1lbnRSZXNvbHZlcnMgPSByZXF1aXJlKCcuL2NvbW1lbnRSZXNvbHZlcnMnKTsKY29uc3QgeyBQdWJTdWIgfSA9IHJlcXVpcmUoJ2dyYXBocWwtc3Vic2NyaXB0aW9ucycpOwoKY29uc3QgcHVic3ViID0gbmV3IFB1YlN1YigpOwoKLy8g5Li7UmVzb2x2ZXIKY29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICAvLyDnlKjmiLfmn6Xor6IKICAgIG1lOiBjb21iaW5lUmVzb2x2ZXJzKGlzQXV0aGVudGljYXRlZCwgdXNlclJlc29sdmVycy5tZSksCiAgICB1c2VyOiB1c2VyUmVzb2x2ZXJzLnVzZXIsCiAgICB1c2VyczogY29tYmluZVJlc29sdmVycyhpc0FkbWluLCB1c2VyUmVzb2x2ZXJzLnVzZXJzKSwKICAgIAogICAgLy8g5paH56ug5p+l6K+iCiAgICBwb3N0OiBwb3N0UmVzb2x2ZXJzLnBvc3QsCiAgICBwb3N0czogcG9zdFJlc29sdmVycy5wb3N0cywKICAgIAogICAgLy8g5YiG57G75ZKM5qCH562+5p+l6K+iCiAgICBjYXRlZ29yaWVzOiBwb3N0UmVzb2x2ZXJzLmNhdGVnb3JpZXMsCiAgICBjYXRlZ29yeTogcG9zdFJlc29sdmVycy5jYXRlZ29yeSwKICAgIHRhZ3M6IHBvc3RSZXNvbHZlcnMudGFncywKICAgIHRhZzogcG9zdFJlc29sdmVycy50YWcsCiAgICAKICAgIC8vIOivhOiuuuafpeivogogICAgY29tbWVudHM6IGNvbW1lbnRSZXNvbHZlcnMuY29tbWVudHMKICB9LAogIAogIE11dGF0aW9uOiB7CiAgICAvLyDnlKjmiLforqTor4EKICAgIHJlZ2lzdGVyOiB1c2VyUmVzb2x2ZXJzLnJlZ2lzdGVyLAogICAgbG9naW46IHVzZXJSZXNvbHZlcnMubG9naW4sCiAgICBsb2dvdXQ6IGNvbWJpbmVSZXNvbHZlcnMoaXNBdXRoZW50aWNhdGVkLCB1c2VyUmVzb2x2ZXJzLmxvZ291dCksCiAgICAKICAgIC8vIOeUqOaIt+euoeeQhgogICAgdXBkYXRlUHJvZmlsZTogY29tYmluZVJlc29sdmVycyhpc0F1dGhlbnRpY2F0ZWQsIHVzZXJSZXNvbHZlcnMudXBkYXRlUHJvZmlsZSksCiAgICBjaGFuZ2VQYXNzd29yZDogY29tYmluZVJlc29sdmVycyhpc0F1dGhlbnRpY2F0ZWQsIHVzZXJSZXNvbHZlcnMuY2hhbmdlUGFzc3dvcmQpLAogICAgCiAgICAvLyDmlofnq6DnrqHnkIYKICAgIGNyZWF0ZVBvc3Q6IGNvbWJpbmVSZXNvbHZlcnMoaXNBdXRoZW50aWNhdGVkLCBwb3N0UmVzb2x2ZXJzLmNyZWF0ZVBvc3QpLAogICAgdXBkYXRlUG9zdDogY29tYmluZVJlc29sdmVycyhpc0F1dGhlbnRpY2F0ZWQsIHBvc3RSZXNvbHZlcnMudXBkYXRlUG9zdCksCiAgICBkZWxldGVQb3N0OiBjb21iaW5lUmVzb2x2ZXJzKGlzQXV0aGVudGljYXRlZCwgcG9zdFJlc29sdmVycy5kZWxldGVQb3N0KSwKICAgIHB1Ymxpc2hQb3N0OiBjb21iaW5lUmVzb2x2ZXJzKGlzQXV0aGVudGljYXRlZCwgcG9zdFJlc29sdmVycy5wdWJsaXNoUG9zdCksCiAgICBsaWtlUG9zdDogY29tYmluZVJlc29sdmVycyhpc0F1dGhlbnRpY2F0ZWQsIHBvc3RSZXNvbHZlcnMubGlrZVBvc3QpLAogICAgCiAgICAvLyDor4TorrrnrqHnkIYKICAgIGNyZWF0ZUNvbW1lbnQ6IGNvbWJpbmVSZXNvbHZlcnMoaXNBdXRoZW50aWNhdGVkLCBjb21tZW50UmVzb2x2ZXJzLmNyZWF0ZUNvbW1lbnQpLAogICAgdXBkYXRlQ29tbWVudDogY29tYmluZVJlc29sdmVycyhpc0F1dGhlbnRpY2F0ZWQsIGNvbW1lbnRSZXNvbHZlcnMudXBkYXRlQ29tbWVudCksCiAgICBkZWxldGVDb21tZW50OiBjb21iaW5lUmVzb2x2ZXJzKGlzQXV0aGVudGljYXRlZCwgY29tbWVudFJlc29sdmVycy5kZWxldGVDb21tZW50KSwKICAgIGFwcHJvdmVDb21tZW50OiBjb21iaW5lUmVzb2x2ZXJzKGlzQWRtaW4sIGNvbW1lbnRSZXNvbHZlcnMuYXBwcm92ZUNvbW1lbnQpLAogICAgCiAgICAvLyDliIbnsbvnrqHnkIYKICAgIGNyZWF0ZUNhdGVnb3J5OiBjb21iaW5lUmVzb2x2ZXJzKGlzQWRtaW4sIHBvc3RSZXNvbHZlcnMuY3JlYXRlQ2F0ZWdvcnkpLAogICAgdXBkYXRlQ2F0ZWdvcnk6IGNvbWJpbmVSZXNvbHZlcnMoaXNBZG1pbiwgcG9zdFJlc29sdmVycy51cGRhdGVDYXRlZ29yeSksCiAgICBkZWxldGVDYXRlZ29yeTogY29tYmluZVJlc29sdmVycyhpc0FkbWluLCBwb3N0UmVzb2x2ZXJzLmRlbGV0ZUNhdGVnb3J5KQogIH0sCiAgCiAgU3Vic2NyaXB0aW9uOiB7CiAgICBwb3N0QWRkZWQ6IHsKICAgICAgc3Vic2NyaWJlOiAoKSA9PiBwdWJzdWIuYXN5bmNJdGVyYXRvcihbJ1BPU1RfQURERUQnXSkKICAgIH0sCiAgICBwb3N0VXBkYXRlZDogewogICAgICBzdWJzY3JpYmU6IChfLCB7IGlkIH0pID0+IHB1YnN1Yi5hc3luY0l0ZXJhdG9yKFtcYFBPU1RfVVBEQVRFRF9cJHtpZH1cYF0pCiAgICB9LAogICAgY29tbWVudEFkZGVkOiB7CiAgICAgIHN1YnNjcmliZTogKF8sIHsgcG9zdElkIH0pID0+IHB1YnN1Yi5hc3luY0l0ZXJhdG9yKFtcYENPTU1FTlRfQURERURfXCR7cG9zdElkfVxgXSkKICAgIH0sCiAgICBjb21tZW50QXBwcm92ZWQ6IHsKICAgICAgc3Vic2NyaWJlOiAoXywgeyBwb3N0SWQgfSkgPT4gcHVic3ViLmFzeW5jSXRlcmF0b3IoW1xgQ09NTUVOVF9BUFBST1ZFRF9cJHtwb3N0SWR9XGBdKQogICAgfQogIH0sCiAgCiAgLy8g57G75Z6L6Kej5p6Q5ZmoCiAgVXNlcjogewogICAgcG9zdHM6IGFzeW5jICh1c2VyLCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLnBvc3RBUEkuZ2V0UG9zdHNCeUF1dGhvcih1c2VyLmlkKTsKICAgIH0sCiAgICBjb21tZW50czogYXN5bmMgKHVzZXIsIGFyZ3MsIHsgZGF0YVNvdXJjZXMgfSkgPT4gewogICAgICByZXR1cm4gZGF0YVNvdXJjZXMuY29tbWVudEFQSS5nZXRDb21tZW50c0J5QXV0aG9yKHVzZXIuaWQpOwogICAgfQogIH0sCiAgCiAgUG9zdDogewogICAgYXV0aG9yOiBhc3luYyAocG9zdCwgYXJncywgeyBkYXRhU291cmNlcyB9KSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlcy51c2VyQVBJLmdldFVzZXJCeUlkKHBvc3QuYXV0aG9ySWQpOwogICAgfSwKICAgIGNhdGVnb3JpZXM6IGFzeW5jIChwb3N0LCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLmNhdGVnb3J5QVBJLmdldENhdGVnb3JpZXNCeUlkcyhwb3N0LmNhdGVnb3J5SWRzKTsKICAgIH0sCiAgICB0YWdzOiBhc3luYyAocG9zdCwgYXJncywgeyBkYXRhU291cmNlcyB9KSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlcy50YWdBUEkuZ2V0VGFnc0J5SWRzKHBvc3QudGFnSWRzKTsKICAgIH0sCiAgICBjb21tZW50czogYXN5bmMgKHBvc3QsIGFyZ3MsIHsgZGF0YVNvdXJjZXMgfSkgPT4gewogICAgICByZXR1cm4gZGF0YVNvdXJjZXMuY29tbWVudEFQSS5nZXRDb21tZW50c0J5UG9zdChwb3N0LmlkKTsKICAgIH0sCiAgICBjb21tZW50Q291bnQ6IGFzeW5jIChwb3N0LCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLmNvbW1lbnRBUEkuZ2V0Q29tbWVudENvdW50QnlQb3N0KHBvc3QuaWQpOwogICAgfQogIH0sCiAgCiAgQ29tbWVudDogewogICAgYXV0aG9yOiBhc3luYyAoY29tbWVudCwgYXJncywgeyBkYXRhU291cmNlcyB9KSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlcy51c2VyQVBJLmdldFVzZXJCeUlkKGNvbW1lbnQuYXV0aG9ySWQpOwogICAgfSwKICAgIHBvc3Q6IGFzeW5jIChjb21tZW50LCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLnBvc3RBUEkuZ2V0UG9zdEJ5SWQoY29tbWVudC5wb3N0SWQpOwogICAgfSwKICAgIHBhcmVudDogYXN5bmMgKGNvbW1lbnQsIGFyZ3MsIHsgZGF0YVNvdXJjZXMgfSkgPT4gewogICAgICByZXR1cm4gY29tbWVudC5wYXJlbnRJZCA/IAogICAgICAgIGRhdGFTb3VyY2VzLmNvbW1lbnRBUEkuZ2V0Q29tbWVudEJ5SWQoY29tbWVudC5wYXJlbnRJZCkgOiBudWxsOwogICAgfSwKICAgIHJlcGxpZXM6IGFzeW5jIChjb21tZW50LCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLmNvbW1lbnRBUEkuZ2V0UmVwbGllc0J5Q29tbWVudChjb21tZW50LmlkKTsKICAgIH0KICB9LAogIAogIENhdGVnb3J5OiB7CiAgICBwb3N0czogYXN5bmMgKGNhdGVnb3J5LCBhcmdzLCB7IGRhdGFTb3VyY2VzIH0pID0+IHsKICAgICAgcmV0dXJuIGRhdGFTb3VyY2VzLnBvc3RBUEkuZ2V0UG9zdHNCeUNhdGVnb3J5KGNhdGVnb3J5LmlkKTsKICAgIH0sCiAgICBwb3N0Q291bnQ6IGFzeW5jIChjYXRlZ29yeSwgYXJncywgeyBkYXRhU291cmNlcyB9KSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlcy5wb3N0QVBJLmdldFBvc3RDb3VudEJ5Q2F0ZWdvcnkoY2F0ZWdvcnkuaWQpOwogICAgfQogIH0sCiAgCiAgVGFnOiB7CiAgICBwb3N0czogYXN5bmMgKHRhZywgYXJncywgeyBkYXRhU291cmNlcyB9KSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlcy5wb3N0QVBJLmdldFBvc3RzQnlUYWcodGFnLmlkKTsKICAgIH0sCiAgICBwb3N0Q291bnQ6IGFzeW5jICh0YWcsIGFyZ3MsIHsgZGF0YVNvdXJjZXMgfSkgPT4gewogICAgICByZXR1cm4gZGF0YVNvdXJjZXMucG9zdEFQSS5nZXRQb3N0Q291bnRCeVRhZyh0YWcuaWQpOwogICAgfQogIH0KfTsKCm1vZHVsZS5leHBvcnRzID0geyByZXNvbHZlcnMsIHB1YnN1YiB9OwoKLy8gMy4gRGF0YUxvYWRlcuWunueOsCAoZGF0YVNvdXJjZXMvdXNlckFQSS5qcykKY29uc3QgRGF0YUxvYWRlciA9IHJlcXVpcmUoJ2RhdGFsb2FkZXInKTsKY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7CgpjbGFzcyBVc2VyQVBJIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIC8vIOaJuemHj+WKoOi9veeUqOaItwogICAgdGhpcy51c2VyTG9hZGVyID0gbmV3IERhdGFMb2FkZXIoYXN5bmMgKHVzZXJJZHMpID0+IHsKICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoeyBfaWQ6IHsgJGluOiB1c2VySWRzIH0gfSk7CiAgICAgIGNvbnN0IHVzZXJNYXAgPSBuZXcgTWFwKHVzZXJzLm1hcCh1c2VyID0+IFt1c2VyLl9pZC50b1N0cmluZygpLCB1c2VyXSkpOwogICAgICByZXR1cm4gdXNlcklkcy5tYXAoaWQgPT4gdXNlck1hcC5nZXQoaWQudG9TdHJpbmcoKSkgfHwgbnVsbCk7CiAgICB9KTsKICAgIAogICAgLy8g5om56YeP5Yqg6L2955So5oi355qE5paH56ug5pWw6YePCiAgICB0aGlzLnVzZXJQb3N0Q291bnRMb2FkZXIgPSBuZXcgRGF0YUxvYWRlcihhc3luYyAodXNlcklkcykgPT4gewogICAgICBjb25zdCBQb3N0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Bvc3QnKTsKICAgICAgY29uc3QgY291bnRzID0gYXdhaXQgUG9zdC5hZ2dyZWdhdGUoWwogICAgICAgIHsgJG1hdGNoOiB7IGF1dGhvcklkOiB7ICRpbjogdXNlcklkcyB9IH0gfSwKICAgICAgICB7ICRncm91cDogeyBfaWQ6ICckYXV0aG9ySWQnLCBjb3VudDogeyAkc3VtOiAxIH0gfSB9CiAgICAgIF0pOwogICAgICAKICAgICAgY29uc3QgY291bnRNYXAgPSBuZXcgTWFwKGNvdW50cy5tYXAoYyA9PiBbYy5faWQudG9TdHJpbmcoKSwgYy5jb3VudF0pKTsKICAgICAgcmV0dXJuIHVzZXJJZHMubWFwKGlkID0+IGNvdW50TWFwLmdldChpZC50b1N0cmluZygpKSB8fCAwKTsKICAgIH0pOwogIH0KICAKICBhc3luYyBnZXRVc2VyQnlJZChpZCkgewogICAgcmV0dXJuIHRoaXMudXNlckxvYWRlci5sb2FkKGlkKTsKICB9CiAgCiAgYXN5bmMgZ2V0VXNlcnNCeUlkcyhpZHMpIHsKICAgIHJldHVybiB0aGlzLnVzZXJMb2FkZXIubG9hZE1hbnkoaWRzKTsKICB9CiAgCiAgYXN5bmMgZ2V0VXNlclBvc3RDb3VudCh1c2VySWQpIHsKICAgIHJldHVybiB0aGlzLnVzZXJQb3N0Q291bnRMb2FkZXIubG9hZCh1c2VySWQpOwogIH0KICAKICAvLyDmuIXpmaTnvJPlrZgKICBjbGVhckNhY2hlKHVzZXJJZCkgewogICAgdGhpcy51c2VyTG9hZGVyLmNsZWFyKHVzZXJJZCk7CiAgICB0aGlzLnVzZXJQb3N0Q291bnRMb2FkZXIuY2xlYXIodXNlcklkKTsKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gVXNlckFQSTsKCi8vIDQuIOiupOivgeaOiOadgyAocmVzb2x2ZXJzL2F1dGhvcml6YXRpb24uanMpCmNvbnN0IHsgRm9yYmlkZGVuRXJyb3IsIEF1dGhlbnRpY2F0aW9uRXJyb3IgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpOwpjb25zdCB7IHNraXAgfSA9IHJlcXVpcmUoJ2dyYXBocWwtcmVzb2x2ZXJzJyk7Cgpjb25zdCBpc0F1dGhlbnRpY2F0ZWQgPSAocGFyZW50LCBhcmdzLCB7IHVzZXIgfSkgPT4gewogIHJldHVybiB1c2VyID8gc2tpcCA6IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCfor7flhYjnmbvlvZUnKTsKfTsKCmNvbnN0IGlzQWRtaW4gPSAocGFyZW50LCBhcmdzLCB7IHVzZXIgfSkgPT4gewogIGlmICghdXNlcikgewogICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCfor7flhYjnmbvlvZUnKTsKICB9CiAgCiAgaWYgKHVzZXIucm9sZSAhPT0gJ0FETUlOJykgewogICAgcmV0dXJuIG5ldyBGb3JiaWRkZW5FcnJvcign5p2D6ZmQ5LiN6LazJyk7CiAgfQogIAogIHJldHVybiBza2lwOwp9OwoKY29uc3QgaXNQb3N0T3duZXIgPSBhc3luYyAocGFyZW50LCB7IGlkIH0sIHsgdXNlciwgZGF0YVNvdXJjZXMgfSkgPT4gewogIGlmICghdXNlcikgewogICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCfor7flhYjnmbvlvZUnKTsKICB9CiAgCiAgY29uc3QgcG9zdCA9IGF3YWl0IGRhdGFTb3VyY2VzLnBvc3RBUEkuZ2V0UG9zdEJ5SWQoaWQpOwogIAogIGlmICghcG9zdCkgewogICAgdGhyb3cgbmV3IFVzZXJJbnB1dEVycm9yKCfmlofnq6DkuI3lrZjlnKgnKTsKICB9CiAgCiAgaWYgKHBvc3QuYXV0aG9ySWQudG9TdHJpbmcoKSAhPT0gdXNlci5pZCAmJiB1c2VyLnJvbGUgIT09ICdBRE1JTicpIHsKICAgIHJldHVybiBuZXcgRm9yYmlkZGVuRXJyb3IoJ+WPquiDvee8lui+keiHquW3seeahOaWh+eroCcpOwogIH0KICAKICByZXR1cm4gc2tpcDsKfTsKCm1vZHVsZS5leHBvcnRzID0gewogIGlzQXV0aGVudGljYXRlZCwKICBpc0FkbWluLAogIGlzUG9zdE93bmVyCn07CgovLyA1LiBBcG9sbG8gU2VydmVy6YWN572uIChzZXJ2ZXIuanMpCmNvbnN0IHsgQXBvbGxvU2VydmVyIH0gPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyLWV4cHJlc3MnKTsKY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IGRlcHRoTGltaXQgPSByZXF1aXJlKCdncmFwaHFsLWRlcHRoLWxpbWl0Jyk7CmNvbnN0IGNvc3RBbmFseXNpcyA9IHJlcXVpcmUoJ2dyYXBocWwtY29zdC1hbmFseXNpcycpOwpjb25zdCB7IGNyZWF0ZVJhdGVMaW1pdFJ1bGUgfSA9IHJlcXVpcmUoJ2dyYXBocWwtcmF0ZS1saW1pdCcpOwpjb25zdCB0eXBlRGVmcyA9IHJlcXVpcmUoJy4vc2NoZW1hL3R5cGVEZWZzJyk7CmNvbnN0IHsgcmVzb2x2ZXJzIH0gPSByZXF1aXJlKCcuL3Jlc29sdmVycycpOwpjb25zdCBVc2VyQVBJID0gcmVxdWlyZSgnLi9kYXRhU291cmNlcy91c2VyQVBJJyk7CmNvbnN0IFBvc3RBUEkgPSByZXF1aXJlKCcuL2RhdGFTb3VyY2VzL3Bvc3RBUEknKTsKY29uc3QgQ29tbWVudEFQSSA9IHJlcXVpcmUoJy4vZGF0YVNvdXJjZXMvY29tbWVudEFQSScpOwoKLy8g6YCf546H6ZmQ5Yi26KeE5YiZCmNvbnN0IHJhdGVMaW1pdFJ1bGUgPSBjcmVhdGVSYXRlTGltaXRSdWxlKHsKICBpZGVudGlmeUNvbnRleHQ6IChjb250ZXh0KSA9PiBjb250ZXh0LnVzZXI/LmlkIHx8IGNvbnRleHQucmVxLmlwLAogIGZvcm1hdEVycm9yOiAoeyBmaWVsZE5hbWUgfSkgPT4gewogICAgcmV0dXJuIG5ldyBFcnJvcihcYOivt+axgui/h+S6jumikee5ge+8jOivt+eojeWQjuWGjeivlTogXCR7ZmllbGROYW1lfVxgKTsKICB9Cn0pOwoKLy8g5Yib5bu6QXBvbGxvIFNlcnZlcgpjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHsKICB0eXBlRGVmcywKICByZXNvbHZlcnMsCiAgCiAgLy8g5pWw5o2u5rqQCiAgZGF0YVNvdXJjZXM6ICgpID0+ICh7CiAgICB1c2VyQVBJOiBuZXcgVXNlckFQSSgpLAogICAgcG9zdEFQSTogbmV3IFBvc3RBUEkoKSwKICAgIGNvbW1lbnRBUEk6IG5ldyBDb21tZW50QVBJKCkKICB9KSwKICAKICAvLyDkuIrkuIvmlocKICBjb250ZXh0OiBhc3luYyAoeyByZXEsIGNvbm5lY3Rpb24gfSkgPT4gewogICAgLy8gV2ViU29ja2V06L+e5o6l77yI6K6i6ZiF77yJCiAgICBpZiAoY29ubmVjdGlvbikgewogICAgICByZXR1cm4gY29ubmVjdGlvbi5jb250ZXh0OwogICAgfQogICAgCiAgICAvLyBIVFRQ6K+35rGCCiAgICBsZXQgdXNlciA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7CiAgICAKICAgIGlmICh0b2tlbikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTsKICAgICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChkZWNvZGVkLmlkKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgdG9rZW46JywgZXJyb3IubWVzc2FnZSk7CiAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIHsKICAgICAgcmVxLAogICAgICB1c2VyCiAgICB9OwogIH0sCiAgCiAgLy8g6K6i6ZiF5LiK5LiL5paHCiAgc3Vic2NyaXB0aW9uczogewogICAgb25Db25uZWN0OiBhc3luYyAoY29ubmVjdGlvblBhcmFtcykgPT4gewogICAgICBjb25zdCB0b2tlbiA9IGNvbm5lY3Rpb25QYXJhbXMuYXV0aG9yaXphdGlvbj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTsKICAgICAgCiAgICAgIGlmICh0b2tlbikgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7CiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChkZWNvZGVkLmlkKTsKICAgICAgICAgIHJldHVybiB7IHVzZXIgfTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRva2VuJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICByZXR1cm4ge307CiAgICB9CiAgfSwKICAKICAvLyDpqozor4Hop4TliJkKICB2YWxpZGF0aW9uUnVsZXM6IFsKICAgIGRlcHRoTGltaXQoMTApLCAvLyDpmZDliLbmn6Xor6Lmt7HluqYKICAgIGNvc3RBbmFseXNpcyh7CiAgICAgIG1heGltdW1Db3N0OiAxMDAwLAogICAgICBkZWZhdWx0Q29zdDogMSwKICAgICAgc2NhbGFyQ29zdDogMSwKICAgICAgb2JqZWN0Q29zdDogMiwKICAgICAgbGlzdEZhY3RvcjogMTAsCiAgICAgIGludHJvc3BlY3Rpb25Db3N0OiAxMDAwLAogICAgICBjcmVhdGVFcnJvcjogKG1heCwgYWN0dWFsKSA9PiB7CiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcYOafpeivouWkjeadguW6pui/h+mrmDogXCR7YWN0dWFsfSwg5pyA5aSn5YWB6K64OiBcJHttYXh9XGApOwogICAgICB9CiAgICB9KSwKICAgIHJhdGVMaW1pdFJ1bGUKICBdLAogIAogIC8vIOagvOW8j+WMlumUmeivrwogIGZvcm1hdEVycm9yOiAoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0dyYXBoUUwgRXJyb3I6JywgZXJyb3IpOwogICAgCiAgICAvLyDnlJ/kuqfnjq/looPpmpDol4/lhoXpg6jplJnor6/or6bmg4UKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmICFlcnJvci5leHRlbnNpb25zPy5jb2RlKSB7CiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ+acjeWKoeWZqOWGhemDqOmUmeivrycpOwogICAgfQogICAgCiAgICByZXR1cm4gZXJyb3I7CiAgfSwKICAKICAvLyDlvIDlj5Hlt6XlhbcKICBpbnRyb3NwZWN0aW9uOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLAogIHBsYXlncm91bmQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicKfSk7CgovLyBFeHByZXNz5bqU55SoCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKCi8vIOW6lOeUqEFwb2xsbyBHcmFwaFFM5Lit6Ze05Lu2CnNlcnZlci5hcHBseU1pZGRsZXdhcmUoeyBhcHAsIHBhdGg6ICcvZ3JhcGhxbCcgfSk7CgovLyDlkK/liqjmnI3liqHlmagKY29uc3QgaHR0cFNlcnZlciA9IHJlcXVpcmUoJ2h0dHAnKS5jcmVhdGVTZXJ2ZXIoYXBwKTsKc2VydmVyLmluc3RhbGxTdWJzY3JpcHRpb25IYW5kbGVycyhodHRwU2VydmVyKTsKCmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDQwMDA7CgpodHRwU2VydmVyLmxpc3RlbihQT1JULCAoKSA9PiB7CiAgY29uc29sZS5sb2coXGDwn5qAIFNlcnZlciByZWFkeSBhdCBodHRwOi8vbG9jYWxob3N0Olwke1BPUlR9XCR7c2VydmVyLmdyYXBocWxQYXRofVxgKTsKICBjb25zb2xlLmxvZyhcYPCfmoAgU3Vic2NyaXB0aW9ucyByZWFkeSBhdCB3czovL2xvY2FsaG9zdDpcJHtQT1JUfVwke3NlcnZlci5zdWJzY3JpcHRpb25zUGF0aH1cYCk7Cn0pOw=="
            }
        ]
    },
    {
        id: 'microservice-api-generator',
        title: '微服务API生成器',
        description: '设计和实现微服务架构的API，包括服务拆分、通信机制和服务治理',
        category: 'api-development',
        language: 'general',
        difficulty: '高级',
        tags: ['微服务', '服务拆分', 'API网关'],
        prompt: "6K+35biu5oiR6K6+6K6h5ZKM5a6e546w5b6u5pyN5Yqh5p625p6E55qEQVBJ57O757uf77yaCgoqKuS4muWKoeWcuuaZr++8mioqClvor6bnu4bmj4/ov7DkuJrliqHpoobln5/lkozlip/og73pnIDmsYJdCgoqKuacjeWKoeaLhuWIhumcgOaxgu+8mioqClvmj4/ov7DpnIDopoHmi4bliIbnmoTmnI3liqHlkozovrnnlYxdCgoqKuaKgOacr+agiO+8mioqCi0g5pyN5Yqh5qGG5p6277yaW+WmglNwcmluZyBCb29044CBRXhwcmVzcy5qc+OAgUdvIEdpbuetiV0KLSDmnI3liqHms6jlhozlj5HnjrDvvJpb5aaCQ29uc3Vs44CBRXVyZWth44CBTmFjb3PnrYldCi0gQVBJ572R5YWz77yaW+WmgktvbmfjgIFadXVs44CBR2F0ZXdheeetiV0KLSDmtojmga/pmJ/liJfvvJpb5aaCUmFiYml0TVHjgIFLYWZrYeOAgVJlZGlz562JXQotIOaVsOaNruW6k++8mlvlkITmnI3liqHnmoTmlbDmja7lrZjlgqjmlrnmoYhdCgoqKuW+ruacjeWKoeiuvuiuoeimgeaxgu+8mioqCgoxLiAqKuacjeWKoeaLhuWIhuiuvuiuoSoqCiAgIC0g6aKG5Z+f6amx5Yqo6K6+6K6hCiAgIC0g5pyN5Yqh6L6555WM5YiS5YiGCiAgIC0g5pWw5o2u5LiA6Ie05oCn562W55WlCiAgIC0g5pyN5Yqh5L6d6LWW5YWz57O7CgoyLiAqKkFQSeiuvuiuoSoqCiAgIC0gUkVTVGZ1bCBBUEnop4TojIMKICAgLSDmnI3liqHpl7TpgJrkv6HljY/orq4KICAgLSDlvILmraXmtojmga/orr7orqEKICAgLSDkuovku7bpqbHliqjmnrbmnoQKCjMuICoq5pyN5Yqh5rK755CGKioKICAgLSDmnI3liqHms6jlhozlj5HnjrAKICAgLSDotJ/ovb3lnYfooaEKICAgLSDnhpTmlq3pmY3nuqcKICAgLSDpmZDmtYHmjqfliLYKCjQuICoq5pWw5o2u566h55CGKioKICAgLSDliIbluIPlvI/kuovliqEKICAgLSDmlbDmja7kuIDoh7TmgKcKICAgLSDkuovku7bmuq/mupAKICAgLSBDUVJT5qih5byPCgo1LiAqKuebkeaOp+i/kOe7tCoqCiAgIC0g6ZO+6Lev6L+96LiqCiAgIC0g5pyN5Yqh55uR5o6nCiAgIC0g5pel5b+X6IGa5ZCICiAgIC0g5YGl5bq35qOA5p+lCgoqKui+k+WHuuWGheWuue+8mioqCi0g5b6u5pyN5Yqh5p625p6E6K6+6K6hCi0g5ZCE5pyN5YqhQVBJ5a6e546wCi0g5pyN5Yqh6Ze06YCa5L+h5Luj56CBCi0g6YWN572u566h55CG5pa55qGICi0g6YOo572y6ISa5pysCi0g55uR5o6n5pa55qGI",
        examples: [
            {
                title: 'Spring Cloud电商微服务示例',
                code: "Ly8g55S15ZWG5b6u5pyN5Yqh5p625p6E5a6M5pW05a6e546wCgovLyAxLiDnlKjmiLfmnI3liqEgKHVzZXItc2VydmljZSkKLy8gVXNlckNvbnRyb2xsZXIuamF2YQpAUmVzdENvbnRyb2xsZXIKQFJlcXVlc3RNYXBwaW5nKCIvYXBpL3YxL3VzZXJzIikKQFZhbGlkYXRlZApwdWJsaWMgY2xhc3MgVXNlckNvbnRyb2xsZXIgewogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlOwogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFVzZXJFdmVudFB1Ymxpc2hlciBldmVudFB1Ymxpc2hlcjsKICAgIAogICAgQEdldE1hcHBpbmcoIi97aWR9IikKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxVc2VyRFRPPj4gZ2V0VXNlcihAUGF0aFZhcmlhYmxlIExvbmcgaWQpIHsKICAgICAgICBVc2VyRFRPIHVzZXIgPSB1c2VyU2VydmljZS5nZXRVc2VyQnlJZChpZCk7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKEFwaVJlc3BvbnNlLnN1Y2Nlc3ModXNlcikpOwogICAgfQogICAgCiAgICBAUG9zdE1hcHBpbmcKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxVc2VyRFRPPj4gY3JlYXRlVXNlcigKICAgICAgICAgICAgQFZhbGlkIEBSZXF1ZXN0Qm9keSBDcmVhdGVVc2VyUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgVXNlckRUTyB1c2VyID0gdXNlclNlcnZpY2UuY3JlYXRlVXNlcihyZXF1ZXN0KTsKICAgICAgICAKICAgICAgICAvLyDlj5HluIPnlKjmiLfliJvlu7rkuovku7YKICAgICAgICBldmVudFB1Ymxpc2hlci5wdWJsaXNoVXNlckNyZWF0ZWQodXNlcik7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5LnN0YXR1cyhIdHRwU3RhdHVzLkNSRUFURUQpCiAgICAgICAgICAgICAgICAuYm9keShBcGlSZXNwb25zZS5zdWNjZXNzKHVzZXIpKTsKICAgIH0KICAgIAogICAgQFB1dE1hcHBpbmcoIi97aWR9IikKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxVc2VyRFRPPj4gdXBkYXRlVXNlcigKICAgICAgICAgICAgQFBhdGhWYXJpYWJsZSBMb25nIGlkLAogICAgICAgICAgICBAVmFsaWQgQFJlcXVlc3RCb2R5IFVwZGF0ZVVzZXJSZXF1ZXN0IHJlcXVlc3QpIHsKICAgICAgICBVc2VyRFRPIHVzZXIgPSB1c2VyU2VydmljZS51cGRhdGVVc2VyKGlkLCByZXF1ZXN0KTsKICAgICAgICAKICAgICAgICAvLyDlj5HluIPnlKjmiLfmm7TmlrDkuovku7YKICAgICAgICBldmVudFB1Ymxpc2hlci5wdWJsaXNoVXNlclVwZGF0ZWQodXNlcik7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKEFwaVJlc3BvbnNlLnN1Y2Nlc3ModXNlcikpOwogICAgfQogICAgCiAgICBAR2V0TWFwcGluZwogICAgcHVibGljIFJlc3BvbnNlRW50aXR5PEFwaVJlc3BvbnNlPFBhZ2VSZXN1bHQ8VXNlckRUTz4+PiBnZXRVc2VycygKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShkZWZhdWx0VmFsdWUgPSAiMCIpIGludCBwYWdlLAogICAgICAgICAgICBAUmVxdWVzdFBhcmFtKGRlZmF1bHRWYWx1ZSA9ICIxMCIpIGludCBzaXplLAogICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2gpIHsKICAgICAgICAKICAgICAgICBQYWdlYWJsZSBwYWdlYWJsZSA9IFBhZ2VSZXF1ZXN0Lm9mKHBhZ2UsIHNpemUpOwogICAgICAgIFBhZ2VSZXN1bHQ8VXNlckRUTz4gdXNlcnMgPSB1c2VyU2VydmljZS5nZXRVc2VycyhwYWdlYWJsZSwgc2VhcmNoKTsKICAgICAgICAKICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2soQXBpUmVzcG9uc2Uuc3VjY2Vzcyh1c2VycykpOwogICAgfQp9CgovLyBVc2VyU2VydmljZS5qYXZhCkBTZXJ2aWNlCkBUcmFuc2FjdGlvbmFsCnB1YmxpYyBjbGFzcyBVc2VyU2VydmljZSB7CiAgICAKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CiAgICAKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlck1hcHBlciB1c2VyTWFwcGVyOwogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFJlZGlzVGVtcGxhdGU8U3RyaW5nLCBPYmplY3Q+IHJlZGlzVGVtcGxhdGU7CiAgICAKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVU0VSX0NBQ0hFX0tFWSA9ICJ1c2VyOiI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBEdXJhdGlvbiBDQUNIRV9UVEwgPSBEdXJhdGlvbi5vZkhvdXJzKDEpOwogICAgCiAgICBAQ2FjaGVhYmxlKHZhbHVlID0gInVzZXJzIiwga2V5ID0gIiNpZCIpCiAgICBwdWJsaWMgVXNlckRUTyBnZXRVc2VyQnlJZChMb25nIGlkKSB7CiAgICAgICAgVXNlciB1c2VyID0gdXNlclJlcG9zaXRvcnkuZmluZEJ5SWQoaWQpCiAgICAgICAgICAgICAgICAub3JFbHNlVGhyb3coKCkgLT4gbmV3IFVzZXJOb3RGb3VuZEV4Y2VwdGlvbigi55So5oi35LiN5a2Y5ZyoOiAiICsgaWQpKTsKICAgICAgICByZXR1cm4gdXNlck1hcHBlci50b0RUTyh1c2VyKTsKICAgIH0KICAgIAogICAgcHVibGljIFVzZXJEVE8gY3JlYXRlVXNlcihDcmVhdGVVc2VyUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgLy8g5qOA5p+l55So5oi35ZCN5ZKM6YKu566x5ZSv5LiA5oCnCiAgICAgICAgaWYgKHVzZXJSZXBvc2l0b3J5LmV4aXN0c0J5VXNlcm5hbWUocmVxdWVzdC5nZXRVc2VybmFtZSgpKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRHVwbGljYXRlVXNlckV4Y2VwdGlvbigi55So5oi35ZCN5bey5a2Y5ZyoOiAiICsgcmVxdWVzdC5nZXRVc2VybmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKHVzZXJSZXBvc2l0b3J5LmV4aXN0c0J5RW1haWwocmVxdWVzdC5nZXRFbWFpbCgpKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRHVwbGljYXRlVXNlckV4Y2VwdGlvbigi6YKu566x5bey5a2Y5ZyoOiAiICsgcmVxdWVzdC5nZXRFbWFpbCgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgVXNlciB1c2VyID0gdXNlck1hcHBlci50b0VudGl0eShyZXF1ZXN0KTsKICAgICAgICB1c2VyLnNldFBhc3N3b3JkKHBhc3N3b3JkRW5jb2Rlci5lbmNvZGUocmVxdWVzdC5nZXRQYXNzd29yZCgpKSk7CiAgICAgICAgdXNlci5zZXRTdGF0dXMoVXNlclN0YXR1cy5BQ1RJVkUpOwogICAgICAgIAogICAgICAgIFVzZXIgc2F2ZWRVc2VyID0gdXNlclJlcG9zaXRvcnkuc2F2ZSh1c2VyKTsKICAgICAgICByZXR1cm4gdXNlck1hcHBlci50b0RUTyhzYXZlZFVzZXIpOwogICAgfQogICAgCiAgICBAQ2FjaGVFdmljdCh2YWx1ZSA9ICJ1c2VycyIsIGtleSA9ICIjaWQiKQogICAgcHVibGljIFVzZXJEVE8gdXBkYXRlVXNlcihMb25nIGlkLCBVcGRhdGVVc2VyUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgVXNlciB1c2VyID0gdXNlclJlcG9zaXRvcnkuZmluZEJ5SWQoaWQpCiAgICAgICAgICAgICAgICAub3JFbHNlVGhyb3coKCkgLT4gbmV3IFVzZXJOb3RGb3VuZEV4Y2VwdGlvbigi55So5oi35LiN5a2Y5ZyoOiAiICsgaWQpKTsKICAgICAgICAKICAgICAgICB1c2VyTWFwcGVyLnVwZGF0ZUVudGl0eSh1c2VyLCByZXF1ZXN0KTsKICAgICAgICBVc2VyIHVwZGF0ZWRVc2VyID0gdXNlclJlcG9zaXRvcnkuc2F2ZSh1c2VyKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdXNlck1hcHBlci50b0RUTyh1cGRhdGVkVXNlcik7CiAgICB9CiAgICAKICAgIHB1YmxpYyBQYWdlUmVzdWx0PFVzZXJEVE8+IGdldFVzZXJzKFBhZ2VhYmxlIHBhZ2VhYmxlLCBTdHJpbmcgc2VhcmNoKSB7CiAgICAgICAgUGFnZTxVc2VyPiB1c2VyUGFnZTsKICAgICAgICAKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaGFzVGV4dChzZWFyY2gpKSB7CiAgICAgICAgICAgIHVzZXJQYWdlID0gdXNlclJlcG9zaXRvcnkuZmluZEJ5VXNlcm5hbWVDb250YWluaW5nT3JFbWFpbENvbnRhaW5pbmcoCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoLCBzZWFyY2gsIHBhZ2VhYmxlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1c2VyUGFnZSA9IHVzZXJSZXBvc2l0b3J5LmZpbmRBbGwocGFnZWFibGUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBMaXN0PFVzZXJEVE8+IHVzZXJzID0gdXNlclBhZ2UuZ2V0Q29udGVudCgpLnN0cmVhbSgpCiAgICAgICAgICAgICAgICAubWFwKHVzZXJNYXBwZXI6OnRvRFRPKQogICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFBhZ2VSZXN1bHQuPFVzZXJEVE8+YnVpbGRlcigpCiAgICAgICAgICAgICAgICAuY29udGVudCh1c2VycykKICAgICAgICAgICAgICAgIC5wYWdlKHVzZXJQYWdlLmdldE51bWJlcigpKQogICAgICAgICAgICAgICAgLnNpemUodXNlclBhZ2UuZ2V0U2l6ZSgpKQogICAgICAgICAgICAgICAgLnRvdGFsRWxlbWVudHModXNlclBhZ2UuZ2V0VG90YWxFbGVtZW50cygpKQogICAgICAgICAgICAgICAgLnRvdGFsUGFnZXModXNlclBhZ2UuZ2V0VG90YWxQYWdlcygpKQogICAgICAgICAgICAgICAgLmJ1aWxkKCk7CiAgICB9Cn0KCi8vIDIuIOiuouWNleacjeWKoSAob3JkZXItc2VydmljZSkKLy8gT3JkZXJDb250cm9sbGVyLmphdmEKQFJlc3RDb250cm9sbGVyCkBSZXF1ZXN0TWFwcGluZygiL2FwaS92MS9vcmRlcnMiKQpwdWJsaWMgY2xhc3MgT3JkZXJDb250cm9sbGVyIHsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBPcmRlclNlcnZpY2Ugb3JkZXJTZXJ2aWNlOwogICAgCiAgICBAUG9zdE1hcHBpbmcKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxPcmRlckRUTz4+IGNyZWF0ZU9yZGVyKAogICAgICAgICAgICBAVmFsaWQgQFJlcXVlc3RCb2R5IENyZWF0ZU9yZGVyUmVxdWVzdCByZXF1ZXN0LAogICAgICAgICAgICBAUmVxdWVzdEhlYWRlcigiWC1Vc2VyLUlkIikgTG9uZyB1c2VySWQpIHsKICAgICAgICAKICAgICAgICBPcmRlckRUTyBvcmRlciA9IG9yZGVyU2VydmljZS5jcmVhdGVPcmRlcih1c2VySWQsIHJlcXVlc3QpOwogICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5zdGF0dXMoSHR0cFN0YXR1cy5DUkVBVEVEKQogICAgICAgICAgICAgICAgLmJvZHkoQXBpUmVzcG9uc2Uuc3VjY2VzcyhvcmRlcikpOwogICAgfQogICAgCiAgICBAR2V0TWFwcGluZygiL3tpZH0iKQogICAgcHVibGljIFJlc3BvbnNlRW50aXR5PEFwaVJlc3BvbnNlPE9yZGVyRFRPPj4gZ2V0T3JkZXIoCiAgICAgICAgICAgIEBQYXRoVmFyaWFibGUgTG9uZyBpZCwKICAgICAgICAgICAgQFJlcXVlc3RIZWFkZXIoIlgtVXNlci1JZCIpIExvbmcgdXNlcklkKSB7CiAgICAgICAgCiAgICAgICAgT3JkZXJEVE8gb3JkZXIgPSBvcmRlclNlcnZpY2UuZ2V0T3JkZXJCeUlkKGlkLCB1c2VySWQpOwogICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhBcGlSZXNwb25zZS5zdWNjZXNzKG9yZGVyKSk7CiAgICB9CiAgICAKICAgIEBHZXRNYXBwaW5nCiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8QXBpUmVzcG9uc2U8UGFnZVJlc3VsdDxPcmRlckRUTz4+PiBnZXRVc2VyT3JkZXJzKAogICAgICAgICAgICBAUmVxdWVzdEhlYWRlcigiWC1Vc2VyLUlkIikgTG9uZyB1c2VySWQsCiAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oZGVmYXVsdFZhbHVlID0gIjAiKSBpbnQgcGFnZSwKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShkZWZhdWx0VmFsdWUgPSAiMTAiKSBpbnQgc2l6ZSwKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBPcmRlclN0YXR1cyBzdGF0dXMpIHsKICAgICAgICAKICAgICAgICBQYWdlYWJsZSBwYWdlYWJsZSA9IFBhZ2VSZXF1ZXN0Lm9mKHBhZ2UsIHNpemUpOwogICAgICAgIFBhZ2VSZXN1bHQ8T3JkZXJEVE8+IG9yZGVycyA9IG9yZGVyU2VydmljZS5nZXRVc2VyT3JkZXJzKHVzZXJJZCwgcGFnZWFibGUsIHN0YXR1cyk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKEFwaVJlc3BvbnNlLnN1Y2Nlc3Mob3JkZXJzKSk7CiAgICB9CiAgICAKICAgIEBQdXRNYXBwaW5nKCIve2lkfS9jYW5jZWwiKQogICAgcHVibGljIFJlc3BvbnNlRW50aXR5PEFwaVJlc3BvbnNlPE9yZGVyRFRPPj4gY2FuY2VsT3JkZXIoCiAgICAgICAgICAgIEBQYXRoVmFyaWFibGUgTG9uZyBpZCwKICAgICAgICAgICAgQFJlcXVlc3RIZWFkZXIoIlgtVXNlci1JZCIpIExvbmcgdXNlcklkKSB7CiAgICAgICAgCiAgICAgICAgT3JkZXJEVE8gb3JkZXIgPSBvcmRlclNlcnZpY2UuY2FuY2VsT3JkZXIoaWQsIHVzZXJJZCk7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKEFwaVJlc3BvbnNlLnN1Y2Nlc3Mob3JkZXIpKTsKICAgIH0KfQoKLy8gT3JkZXJTZXJ2aWNlLmphdmEKQFNlcnZpY2UKQFRyYW5zYWN0aW9uYWwKcHVibGljIGNsYXNzIE9yZGVyU2VydmljZSB7CiAgICAKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgT3JkZXJSZXBvc2l0b3J5IG9yZGVyUmVwb3NpdG9yeTsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBVc2VyU2VydmljZUNsaWVudCB1c2VyU2VydmljZUNsaWVudDsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBQcm9kdWN0U2VydmljZUNsaWVudCBwcm9kdWN0U2VydmljZUNsaWVudDsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBQYXltZW50U2VydmljZUNsaWVudCBwYXltZW50U2VydmljZUNsaWVudDsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBPcmRlckV2ZW50UHVibGlzaGVyIGV2ZW50UHVibGlzaGVyOwogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIE9yZGVyTWFwcGVyIG9yZGVyTWFwcGVyOwogICAgCiAgICBwdWJsaWMgT3JkZXJEVE8gY3JlYXRlT3JkZXIoTG9uZyB1c2VySWQsIENyZWF0ZU9yZGVyUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgLy8gMS4g6aqM6K+B55So5oi35a2Y5ZyoCiAgICAgICAgVXNlckRUTyB1c2VyID0gdXNlclNlcnZpY2VDbGllbnQuZ2V0VXNlcih1c2VySWQpCiAgICAgICAgICAgICAgICAub3JFbHNlVGhyb3coKCkgLT4gbmV3IFVzZXJOb3RGb3VuZEV4Y2VwdGlvbigi55So5oi35LiN5a2Y5ZyoOiAiICsgdXNlcklkKSk7CiAgICAgICAgCiAgICAgICAgLy8gMi4g6aqM6K+B5ZWG5ZOB5bqT5a2YCiAgICAgICAgTGlzdDxPcmRlckl0ZW1SZXF1ZXN0PiBpdGVtcyA9IHJlcXVlc3QuZ2V0SXRlbXMoKTsKICAgICAgICBMaXN0PFByb2R1Y3REVE8+IHByb2R1Y3RzID0gcHJvZHVjdFNlcnZpY2VDbGllbnQuZ2V0UHJvZHVjdHMoCiAgICAgICAgICAgICAgICBpdGVtcy5zdHJlYW0oKS5tYXAoT3JkZXJJdGVtUmVxdWVzdDo6Z2V0UHJvZHVjdElkKS5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpKTsKICAgICAgICAKICAgICAgICB2YWxpZGF0ZVByb2R1Y3RzQW5kU3RvY2soaXRlbXMsIHByb2R1Y3RzKTsKICAgICAgICAKICAgICAgICAvLyAzLiDorqHnrpforqLljZXph5Hpop0KICAgICAgICBCaWdEZWNpbWFsIHRvdGFsQW1vdW50ID0gY2FsY3VsYXRlVG90YWxBbW91bnQoaXRlbXMsIHByb2R1Y3RzKTsKICAgICAgICAKICAgICAgICAvLyA0LiDliJvlu7rorqLljZUKICAgICAgICBPcmRlciBvcmRlciA9IE9yZGVyLmJ1aWxkZXIoKQogICAgICAgICAgICAgICAgLnVzZXJJZCh1c2VySWQpCiAgICAgICAgICAgICAgICAuc3RhdHVzKE9yZGVyU3RhdHVzLlBFTkRJTkcpCiAgICAgICAgICAgICAgICAudG90YWxBbW91bnQodG90YWxBbW91bnQpCiAgICAgICAgICAgICAgICAuY3JlYXRlZEF0KExvY2FsRGF0ZVRpbWUubm93KCkpCiAgICAgICAgICAgICAgICAuYnVpbGQoKTsKICAgICAgICAKICAgICAgICAvLyA1LiDliJvlu7rorqLljZXpobkKICAgICAgICBMaXN0PE9yZGVySXRlbT4gb3JkZXJJdGVtcyA9IGNyZWF0ZU9yZGVySXRlbXMob3JkZXIsIGl0ZW1zLCBwcm9kdWN0cyk7CiAgICAgICAgb3JkZXIuc2V0SXRlbXMob3JkZXJJdGVtcyk7CiAgICAgICAgCiAgICAgICAgT3JkZXIgc2F2ZWRPcmRlciA9IG9yZGVyUmVwb3NpdG9yeS5zYXZlKG9yZGVyKTsKICAgICAgICAKICAgICAgICAvLyA2LiDlj5HluIPorqLljZXliJvlu7rkuovku7YKICAgICAgICBldmVudFB1Ymxpc2hlci5wdWJsaXNoT3JkZXJDcmVhdGVkKHNhdmVkT3JkZXIpOwogICAgICAgIAogICAgICAgIHJldHVybiBvcmRlck1hcHBlci50b0RUTyhzYXZlZE9yZGVyKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIHZhbGlkYXRlUHJvZHVjdHNBbmRTdG9jayhMaXN0PE9yZGVySXRlbVJlcXVlc3Q+IGl0ZW1zLCBMaXN0PFByb2R1Y3REVE8+IHByb2R1Y3RzKSB7CiAgICAgICAgTWFwPExvbmcsIFByb2R1Y3REVE8+IHByb2R1Y3RNYXAgPSBwcm9kdWN0cy5zdHJlYW0oKQogICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b01hcChQcm9kdWN0RFRPOjpnZXRJZCwgRnVuY3Rpb24uaWRlbnRpdHkoKSkpOwogICAgICAgIAogICAgICAgIGZvciAoT3JkZXJJdGVtUmVxdWVzdCBpdGVtIDogaXRlbXMpIHsKICAgICAgICAgICAgUHJvZHVjdERUTyBwcm9kdWN0ID0gcHJvZHVjdE1hcC5nZXQoaXRlbS5nZXRQcm9kdWN0SWQoKSk7CiAgICAgICAgICAgIGlmIChwcm9kdWN0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm9kdWN0Tm90Rm91bmRFeGNlcHRpb24oIuWVhuWTgeS4jeWtmOWcqDogIiArIGl0ZW0uZ2V0UHJvZHVjdElkKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAocHJvZHVjdC5nZXRTdG9jaygpIDwgaXRlbS5nZXRRdWFudGl0eSgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW5zdWZmaWNpZW50U3RvY2tFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZy5mb3JtYXQoIuWVhuWTgSAlcyDlupPlrZjkuI3otrPvvIzlvZPliY3lupPlrZg6ICVk77yM6ZyA6KaBOiAlZCIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QuZ2V0TmFtZSgpLCBwcm9kdWN0LmdldFN0b2NrKCksIGl0ZW0uZ2V0UXVhbnRpdHkoKSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgovLyAzLiDllYblk4HmnI3liqEgKHByb2R1Y3Qtc2VydmljZSkKLy8gUHJvZHVjdENvbnRyb2xsZXIuamF2YQpAUmVzdENvbnRyb2xsZXIKQFJlcXVlc3RNYXBwaW5nKCIvYXBpL3YxL3Byb2R1Y3RzIikKcHVibGljIGNsYXNzIFByb2R1Y3RDb250cm9sbGVyIHsKICAgIAogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZTsKICAgIAogICAgQEdldE1hcHBpbmcKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxQYWdlUmVzdWx0PFByb2R1Y3REVE8+Pj4gZ2V0UHJvZHVjdHMoCiAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0oZGVmYXVsdFZhbHVlID0gIjAiKSBpbnQgcGFnZSwKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShkZWZhdWx0VmFsdWUgPSAiMjAiKSBpbnQgc2l6ZSwKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgY2F0ZWdvcnksCiAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaCwKICAgICAgICAgICAgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc29ydEJ5LAogICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzb3J0RGlyKSB7CiAgICAgICAgCiAgICAgICAgUHJvZHVjdFNlYXJjaENyaXRlcmlhIGNyaXRlcmlhID0gUHJvZHVjdFNlYXJjaENyaXRlcmlhLmJ1aWxkZXIoKQogICAgICAgICAgICAgICAgLmNhdGVnb3J5KGNhdGVnb3J5KQogICAgICAgICAgICAgICAgLnNlYXJjaChzZWFyY2gpCiAgICAgICAgICAgICAgICAuc29ydEJ5KHNvcnRCeSkKICAgICAgICAgICAgICAgIC5zb3J0RGlyZWN0aW9uKHNvcnREaXIpCiAgICAgICAgICAgICAgICAuYnVpbGQoKTsKICAgICAgICAKICAgICAgICBQYWdlYWJsZSBwYWdlYWJsZSA9IFBhZ2VSZXF1ZXN0Lm9mKHBhZ2UsIHNpemUpOwogICAgICAgIFBhZ2VSZXN1bHQ8UHJvZHVjdERUTz4gcHJvZHVjdHMgPSBwcm9kdWN0U2VydmljZS5zZWFyY2hQcm9kdWN0cyhjcml0ZXJpYSwgcGFnZWFibGUpOwogICAgICAgIAogICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhBcGlSZXNwb25zZS5zdWNjZXNzKHByb2R1Y3RzKSk7CiAgICB9CiAgICAKICAgIEBHZXRNYXBwaW5nKCIve2lkfSIpCiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8QXBpUmVzcG9uc2U8UHJvZHVjdERUTz4+IGdldFByb2R1Y3QoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7CiAgICAgICAgUHJvZHVjdERUTyBwcm9kdWN0ID0gcHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5SWQoaWQpOwogICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhBcGlSZXNwb25zZS5zdWNjZXNzKHByb2R1Y3QpKTsKICAgIH0KICAgIAogICAgQFBvc3RNYXBwaW5nKCIve2lkfS9zdG9jay9yZXNlcnZlIikKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxBcGlSZXNwb25zZTxWb2lkPj4gcmVzZXJ2ZVN0b2NrKAogICAgICAgICAgICBAUGF0aFZhcmlhYmxlIExvbmcgaWQsCiAgICAgICAgICAgIEBWYWxpZCBAUmVxdWVzdEJvZHkgUmVzZXJ2ZVN0b2NrUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgCiAgICAgICAgcHJvZHVjdFNlcnZpY2UucmVzZXJ2ZVN0b2NrKGlkLCByZXF1ZXN0LmdldFF1YW50aXR5KCksIHJlcXVlc3QuZ2V0T3JkZXJJZCgpKTsKICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2soQXBpUmVzcG9uc2Uuc3VjY2VzcyhudWxsKSk7CiAgICB9CiAgICAKICAgIEBQb3N0TWFwcGluZygiL3tpZH0vc3RvY2svcmVsZWFzZSIpCiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8QXBpUmVzcG9uc2U8Vm9pZD4+IHJlbGVhc2VTdG9jaygKICAgICAgICAgICAgQFBhdGhWYXJpYWJsZSBMb25nIGlkLAogICAgICAgICAgICBAVmFsaWQgQFJlcXVlc3RCb2R5IFJlbGVhc2VTdG9ja1JlcXVlc3QgcmVxdWVzdCkgewogICAgICAgIAogICAgICAgIHByb2R1Y3RTZXJ2aWNlLnJlbGVhc2VTdG9jayhpZCwgcmVxdWVzdC5nZXRRdWFudGl0eSgpLCByZXF1ZXN0LmdldE9yZGVySWQoKSk7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKEFwaVJlc3BvbnNlLnN1Y2Nlc3MobnVsbCkpOwogICAgfQp9CgovLyA0LiBBUEnnvZHlhbPphY3nva4gKGdhdGV3YXktc2VydmljZSkKLy8gYXBwbGljYXRpb24ueW1sCnNwcmluZzoKICBjbG91ZDoKICAgIGdhdGV3YXk6CiAgICAgIHJvdXRlczoKICAgICAgICAtIGlkOiB1c2VyLXNlcnZpY2UKICAgICAgICAgIHVyaTogbGI6Ly91c2VyLXNlcnZpY2UKICAgICAgICAgIHByZWRpY2F0ZXM6CiAgICAgICAgICAgIC0gUGF0aD0vYXBpL3YxL3VzZXJzLyoqCiAgICAgICAgICBmaWx0ZXJzOgogICAgICAgICAgICAtIG5hbWU6IEF1dGhlbnRpY2F0aW9uRmlsdGVyCiAgICAgICAgICAgIC0gbmFtZTogUmF0ZUxpbWl0RmlsdGVyCiAgICAgICAgICAgICAgYXJnczoKICAgICAgICAgICAgICAgIHJlZGlzLXJhdGUtbGltaXRlci5yZXBsZW5pc2hSYXRlOiAxMAogICAgICAgICAgICAgICAgcmVkaXMtcmF0ZS1saW1pdGVyLmJ1cnN0Q2FwYWNpdHk6IDIwCiAgICAgICAgCiAgICAgICAgLSBpZDogb3JkZXItc2VydmljZQogICAgICAgICAgdXJpOiBsYjovL29yZGVyLXNlcnZpY2UKICAgICAgICAgIHByZWRpY2F0ZXM6CiAgICAgICAgICAgIC0gUGF0aD0vYXBpL3YxL29yZGVycy8qKgogICAgICAgICAgZmlsdGVyczoKICAgICAgICAgICAgLSBuYW1lOiBBdXRoZW50aWNhdGlvbkZpbHRlcgogICAgICAgICAgICAtIG5hbWU6IFVzZXJDb250ZXh0RmlsdGVyCiAgICAgICAgCiAgICAgICAgLSBpZDogcHJvZHVjdC1zZXJ2aWNlCiAgICAgICAgICB1cmk6IGxiOi8vcHJvZHVjdC1zZXJ2aWNlCiAgICAgICAgICBwcmVkaWNhdGVzOgogICAgICAgICAgICAtIFBhdGg9L2FwaS92MS9wcm9kdWN0cy8qKgogICAgICAgICAgZmlsdGVyczoKICAgICAgICAgICAgLSBuYW1lOiBDYWNoZUZpbHRlcgogICAgICAgICAgICAgIGFyZ3M6CiAgICAgICAgICAgICAgICBjYWNoZS10dGw6IDMwMAoKLy8gQXV0aGVudGljYXRpb25GaWx0ZXIuamF2YQpAQ29tcG9uZW50CnB1YmxpYyBjbGFzcyBBdXRoZW50aWNhdGlvbkZpbHRlciBpbXBsZW1lbnRzIEdhdGV3YXlGaWx0ZXIsIE9yZGVyZWQgewogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIEp3dFRva2VuUHJvdmlkZXIgdG9rZW5Qcm92aWRlcjsKICAgIAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgTW9ubzxWb2lkPiBmaWx0ZXIoU2VydmVyV2ViRXhjaGFuZ2UgZXhjaGFuZ2UsIEdhdGV3YXlGaWx0ZXJDaGFpbiBjaGFpbikgewogICAgICAgIFNlcnZlckh0dHBSZXF1ZXN0IHJlcXVlc3QgPSBleGNoYW5nZS5nZXRSZXF1ZXN0KCk7CiAgICAgICAgCiAgICAgICAgLy8g6Lez6L+H6K6k6K+B55qE6Lev5b6ECiAgICAgICAgaWYgKGlzUHVibGljUGF0aChyZXF1ZXN0LmdldFBhdGgoKS52YWx1ZSgpKSkgewogICAgICAgICAgICByZXR1cm4gY2hhaW4uZmlsdGVyKGV4Y2hhbmdlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgU3RyaW5nIHRva2VuID0gZXh0cmFjdFRva2VuKHJlcXVlc3QpOwogICAgICAgIGlmICh0b2tlbiA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBoYW5kbGVVbmF1dGhvcml6ZWQoZXhjaGFuZ2UpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBDbGFpbXMgY2xhaW1zID0gdG9rZW5Qcm92aWRlci52YWxpZGF0ZVRva2VuKHRva2VuKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIOa3u+WKoOeUqOaIt+S/oeaBr+WIsOivt+axguWktAogICAgICAgICAgICBTZXJ2ZXJIdHRwUmVxdWVzdCBtb2RpZmllZFJlcXVlc3QgPSByZXF1ZXN0Lm11dGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgLmhlYWRlcigiWC1Vc2VyLUlkIiwgY2xhaW1zLmdldFN1YmplY3QoKSkKICAgICAgICAgICAgICAgICAgICAuaGVhZGVyKCJYLVVzZXItUm9sZSIsIGNsYWltcy5nZXQoInJvbGUiLCBTdHJpbmcuY2xhc3MpKQogICAgICAgICAgICAgICAgICAgIC5idWlsZCgpOwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIGNoYWluLmZpbHRlcihleGNoYW5nZS5tdXRhdGUoKS5yZXF1ZXN0KG1vZGlmaWVkUmVxdWVzdCkuYnVpbGQoKSk7CiAgICAgICAgICAgIAogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHJldHVybiBoYW5kbGVVbmF1dGhvcml6ZWQoZXhjaGFuZ2UpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHJpdmF0ZSBib29sZWFuIGlzUHVibGljUGF0aChTdHJpbmcgcGF0aCkgewogICAgICAgIHJldHVybiBwYXRoLm1hdGNoZXMoIi9hcGkvdjEvdXNlcnMvKHJlZ2lzdGVyfGxvZ2luKSIpIHx8CiAgICAgICAgICAgICAgIHBhdGguc3RhcnRzV2l0aCgiL2FwaS92MS9wcm9kdWN0cyIpOwogICAgfQogICAgCiAgICBwcml2YXRlIFN0cmluZyBleHRyYWN0VG9rZW4oU2VydmVySHR0cFJlcXVlc3QgcmVxdWVzdCkgewogICAgICAgIFN0cmluZyBhdXRoSGVhZGVyID0gcmVxdWVzdC5nZXRIZWFkZXJzKCkuZ2V0Rmlyc3QoIkF1dGhvcml6YXRpb24iKTsKICAgICAgICBpZiAoYXV0aEhlYWRlciAhPSBudWxsICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgiQmVhcmVyICIpKSB7CiAgICAgICAgICAgIHJldHVybiBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAKICAgIHByaXZhdGUgTW9ubzxWb2lkPiBoYW5kbGVVbmF1dGhvcml6ZWQoU2VydmVyV2ViRXhjaGFuZ2UgZXhjaGFuZ2UpIHsKICAgICAgICBTZXJ2ZXJIdHRwUmVzcG9uc2UgcmVzcG9uc2UgPSBleGNoYW5nZS5nZXRSZXNwb25zZSgpOwogICAgICAgIHJlc3BvbnNlLnNldFN0YXR1c0NvZGUoSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQpOwogICAgICAgIAogICAgICAgIFN0cmluZyBib2R5ID0gIntcInN1Y2Nlc3NcIjogZmFsc2UsIFwibWVzc2FnZVwiOiBcIuacquaOiOadg+iuv+mXrlwifSI7CiAgICAgICAgRGF0YUJ1ZmZlciBidWZmZXIgPSByZXNwb25zZS5idWZmZXJGYWN0b3J5KCkud3JhcChib2R5LmdldEJ5dGVzKCkpOwogICAgICAgIAogICAgICAgIHJldHVybiByZXNwb25zZS53cml0ZVdpdGgoTW9uby5qdXN0KGJ1ZmZlcikpOwogICAgfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBpbnQgZ2V0T3JkZXIoKSB7CiAgICAgICAgcmV0dXJuIC0xMDA7CiAgICB9Cn0KCi8vIDUuIOacjeWKoemXtOmAmuS/oSAoRmVpZ24gQ2xpZW50KQovLyBVc2VyU2VydmljZUNsaWVudC5qYXZhCkBGZWlnbkNsaWVudChuYW1lID0gInVzZXItc2VydmljZSIsIGZhbGxiYWNrID0gVXNlclNlcnZpY2VGYWxsYmFjay5jbGFzcykKcHVibGljIGludGVyZmFjZSBVc2VyU2VydmljZUNsaWVudCB7CiAgICAKICAgIEBHZXRNYXBwaW5nKCIvYXBpL3YxL3VzZXJzL3tpZH0iKQogICAgT3B0aW9uYWw8VXNlckRUTz4gZ2V0VXNlcihAUGF0aFZhcmlhYmxlKCJpZCIpIExvbmcgaWQpOwogICAgCiAgICBAR2V0TWFwcGluZygiL2FwaS92MS91c2VycyIpCiAgICBMaXN0PFVzZXJEVE8+IGdldFVzZXJzKEBSZXF1ZXN0UGFyYW0oImlkcyIpIExpc3Q8TG9uZz4gaWRzKTsKfQoKQENvbXBvbmVudApwdWJsaWMgY2xhc3MgVXNlclNlcnZpY2VGYWxsYmFjayBpbXBsZW1lbnRzIFVzZXJTZXJ2aWNlQ2xpZW50IHsKICAgIAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT3B0aW9uYWw8VXNlckRUTz4gZ2V0VXNlcihMb25nIGlkKSB7CiAgICAgICAgbG9nLndhcm4oIueUqOaIt+acjeWKoeiwg+eUqOWksei0pe+8jOS9v+eUqOmZjee6p+aWueahiDogdXNlcklkPXt9IiwgaWQpOwogICAgICAgIHJldHVybiBPcHRpb25hbC5lbXB0eSgpOwogICAgfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBMaXN0PFVzZXJEVE8+IGdldFVzZXJzKExpc3Q8TG9uZz4gaWRzKSB7CiAgICAgICAgbG9nLndhcm4oIueUqOaIt+acjeWKoeaJuemHj+afpeivouWksei0pe+8jOS9v+eUqOmZjee6p+aWueahiDogdXNlcklkcz17fSIsIGlkcyk7CiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5TGlzdCgpOwogICAgfQp9CgovLyA2LiDkuovku7bpqbHliqjmnrbmnoQKLy8gT3JkZXJFdmVudFB1Ymxpc2hlci5qYXZhCkBDb21wb25lbnQKcHVibGljIGNsYXNzIE9yZGVyRXZlbnRQdWJsaXNoZXIgewogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFJhYmJpdFRlbXBsYXRlIHJhYmJpdFRlbXBsYXRlOwogICAgCiAgICBwdWJsaWMgdm9pZCBwdWJsaXNoT3JkZXJDcmVhdGVkKE9yZGVyIG9yZGVyKSB7CiAgICAgICAgT3JkZXJDcmVhdGVkRXZlbnQgZXZlbnQgPSBPcmRlckNyZWF0ZWRFdmVudC5idWlsZGVyKCkKICAgICAgICAgICAgICAgIC5vcmRlcklkKG9yZGVyLmdldElkKCkpCiAgICAgICAgICAgICAgICAudXNlcklkKG9yZGVyLmdldFVzZXJJZCgpKQogICAgICAgICAgICAgICAgLnRvdGFsQW1vdW50KG9yZGVyLmdldFRvdGFsQW1vdW50KCkpCiAgICAgICAgICAgICAgICAuaXRlbXMob3JkZXIuZ2V0SXRlbXMoKS5zdHJlYW0oKQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKHRoaXM6Om1hcFRvRXZlbnRJdGVtKQogICAgICAgICAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKSkKICAgICAgICAgICAgICAgIC50aW1lc3RhbXAoTG9jYWxEYXRlVGltZS5ub3coKSkKICAgICAgICAgICAgICAgIC5idWlsZCgpOwogICAgICAgIAogICAgICAgIHJhYmJpdFRlbXBsYXRlLmNvbnZlcnRBbmRTZW5kKCJvcmRlci5leGNoYW5nZSIsICJvcmRlci5jcmVhdGVkIiwgZXZlbnQpOwogICAgICAgIGxvZy5pbmZvKCLlj5HluIPorqLljZXliJvlu7rkuovku7Y6IG9yZGVySWQ9e30iLCBvcmRlci5nZXRJZCgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgcHVibGlzaE9yZGVyQ2FuY2VsbGVkKE9yZGVyIG9yZGVyKSB7CiAgICAgICAgT3JkZXJDYW5jZWxsZWRFdmVudCBldmVudCA9IE9yZGVyQ2FuY2VsbGVkRXZlbnQuYnVpbGRlcigpCiAgICAgICAgICAgICAgICAub3JkZXJJZChvcmRlci5nZXRJZCgpKQogICAgICAgICAgICAgICAgLnVzZXJJZChvcmRlci5nZXRVc2VySWQoKSkKICAgICAgICAgICAgICAgIC5pdGVtcyhvcmRlci5nZXRJdGVtcygpLnN0cmVhbSgpCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAodGhpczo6bWFwVG9FdmVudEl0ZW0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpKQogICAgICAgICAgICAgICAgLnRpbWVzdGFtcChMb2NhbERhdGVUaW1lLm5vdygpKQogICAgICAgICAgICAgICAgLmJ1aWxkKCk7CiAgICAgICAgCiAgICAgICAgcmFiYml0VGVtcGxhdGUuY29udmVydEFuZFNlbmQoIm9yZGVyLmV4Y2hhbmdlIiwgIm9yZGVyLmNhbmNlbGxlZCIsIGV2ZW50KTsKICAgICAgICBsb2cuaW5mbygi5Y+R5biD6K6i5Y2V5Y+W5raI5LqL5Lu2OiBvcmRlcklkPXt9Iiwgb3JkZXIuZ2V0SWQoKSk7CiAgICB9Cn0KCi8vIOW6k+WtmOacjeWKoeS6i+S7tuebkeWQrOWZqApAUmFiYml0TGlzdGVuZXIocXVldWVzID0gImludmVudG9yeS5vcmRlci5jcmVhdGVkIikKQENvbXBvbmVudApwdWJsaWMgY2xhc3MgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciB7CiAgICAKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgSW52ZW50b3J5U2VydmljZSBpbnZlbnRvcnlTZXJ2aWNlOwogICAgCiAgICBAUmFiYml0SGFuZGxlcgogICAgcHVibGljIHZvaWQgaGFuZGxlT3JkZXJDcmVhdGVkKE9yZGVyQ3JlYXRlZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8g5omj5YeP5bqT5a2YCiAgICAgICAgICAgIGZvciAoT3JkZXJJdGVtRXZlbnQgaXRlbSA6IGV2ZW50LmdldEl0ZW1zKCkpIHsKICAgICAgICAgICAgICAgIGludmVudG9yeVNlcnZpY2UucmVzZXJ2ZVN0b2NrKGl0ZW0uZ2V0UHJvZHVjdElkKCksIAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmdldFF1YW50aXR5KCksIGV2ZW50LmdldE9yZGVySWQoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGxvZy5pbmZvKCLorqLljZXlupPlrZjmiaPlh4/miJDlip86IG9yZGVySWQ9e30iLCBldmVudC5nZXRPcmRlcklkKCkpOwogICAgICAgICAgICAKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2cuZXJyb3IoIuiuouWNleW6k+WtmOaJo+WHj+Wksei0pTogb3JkZXJJZD17fSIsIGV2ZW50LmdldE9yZGVySWQoKSwgZSk7CiAgICAgICAgICAgIC8vIOWPkeW4g+W6k+WtmOaJo+WHj+Wksei0peS6i+S7tgogICAgICAgICAgICBwdWJsaXNoU3RvY2tSZXNlcnZhdGlvbkZhaWxlZChldmVudCk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBAUmFiYml0SGFuZGxlcgogICAgcHVibGljIHZvaWQgaGFuZGxlT3JkZXJDYW5jZWxsZWQoT3JkZXJDYW5jZWxsZWRFdmVudCBldmVudCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIOmHiuaUvuW6k+WtmAogICAgICAgICAgICBmb3IgKE9yZGVySXRlbUV2ZW50IGl0ZW0gOiBldmVudC5nZXRJdGVtcygpKSB7CiAgICAgICAgICAgICAgICBpbnZlbnRvcnlTZXJ2aWNlLnJlbGVhc2VTdG9jayhpdGVtLmdldFByb2R1Y3RJZCgpLCAKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nZXRRdWFudGl0eSgpLCBldmVudC5nZXRPcmRlcklkKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBsb2cuaW5mbygi6K6i5Y2V5bqT5a2Y6YeK5pS+5oiQ5YqfOiBvcmRlcklkPXt9IiwgZXZlbnQuZ2V0T3JkZXJJZCgpKTsKICAgICAgICAgICAgCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nLmVycm9yKCLorqLljZXlupPlrZjph4rmlL7lpLHotKU6IG9yZGVySWQ9e30iLCBldmVudC5nZXRPcmRlcklkKCksIGUpOwogICAgICAgIH0KICAgIH0KfQoKLy8gNy4g5YiG5biD5byP6YWN572u566h55CGCi8vIGJvb3RzdHJhcC55bWwKc3ByaW5nOgogIGFwcGxpY2F0aW9uOgogICAgbmFtZTogb3JkZXItc2VydmljZQogIGNsb3VkOgogICAgbmFjb3M6CiAgICAgIGNvbmZpZzoKICAgICAgICBzZXJ2ZXItYWRkcjogbG9jYWxob3N0Ojg4NDgKICAgICAgICBmaWxlLWV4dGVuc2lvbjogeW1sCiAgICAgICAgZ3JvdXA6IERFRkFVTFRfR1JPVVAKICAgICAgICBuYW1lc3BhY2U6IGRldgogICAgICBkaXNjb3Zlcnk6CiAgICAgICAgc2VydmVyLWFkZHI6IGxvY2FsaG9zdDo4ODQ4CiAgICAgICAgbmFtZXNwYWNlOiBkZXYKCi8vIDguIOmTvui3r+i/vei4qumFjee9rgovLyBUcmFjZUNvbmZpZ3VyYXRpb24uamF2YQpAQ29uZmlndXJhdGlvbgpwdWJsaWMgY2xhc3MgVHJhY2VDb25maWd1cmF0aW9uIHsKICAgIAogICAgQEJlYW4KICAgIHB1YmxpYyBTZW5kZXIgc2VuZGVyKCkgewogICAgICAgIHJldHVybiBPa0h0dHBTZW5kZXIuY3JlYXRlKCJodHRwOi8vbG9jYWxob3N0Ojk0MTEvYXBpL3YyL3NwYW5zIik7CiAgICB9CiAgICAKICAgIEBCZWFuCiAgICBwdWJsaWMgQXN5bmNSZXBvcnRlcjxTcGFuPiBzcGFuUmVwb3J0ZXIoKSB7CiAgICAgICAgcmV0dXJuIEFzeW5jUmVwb3J0ZXIuY3JlYXRlKHNlbmRlcigpKTsKICAgIH0KICAgIAogICAgQEJlYW4KICAgIHB1YmxpYyBUcmFjaW5nIHRyYWNpbmcoKSB7CiAgICAgICAgcmV0dXJuIFRyYWNpbmcubmV3QnVpbGRlcigpCiAgICAgICAgICAgICAgICAubG9jYWxTZXJ2aWNlTmFtZSgib3JkZXItc2VydmljZSIpCiAgICAgICAgICAgICAgICAuc3BhblJlcG9ydGVyKHNwYW5SZXBvcnRlcigpKQogICAgICAgICAgICAgICAgLnNhbXBsZXIoU2FtcGxlci5jcmVhdGUoMS4wZikpCiAgICAgICAgICAgICAgICAuYnVpbGQoKTsKICAgIH0KfQoKLy8gOS4g5YGl5bq35qOA5p+lCi8vIEhlYWx0aENoZWNrQ29udHJvbGxlci5qYXZhCkBSZXN0Q29udHJvbGxlcgpAUmVxdWVzdE1hcHBpbmcoIi9hY3R1YXRvciIpCnB1YmxpYyBjbGFzcyBIZWFsdGhDaGVja0NvbnRyb2xsZXIgewogICAgCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIE9yZGVyUmVwb3NpdG9yeSBvcmRlclJlcG9zaXRvcnk7CiAgICAKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclNlcnZpY2VDbGllbnQgdXNlclNlcnZpY2VDbGllbnQ7CiAgICAKICAgIEBHZXRNYXBwaW5nKCIvaGVhbHRoIikKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxNYXA8U3RyaW5nLCBPYmplY3Q+PiBoZWFsdGgoKSB7CiAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBoZWFsdGggPSBuZXcgSGFzaE1hcDw+KCk7CiAgICAgICAgaGVhbHRoLnB1dCgic3RhdHVzIiwgIlVQIik7CiAgICAgICAgaGVhbHRoLnB1dCgidGltZXN0YW1wIiwgTG9jYWxEYXRlVGltZS5ub3coKSk7CiAgICAgICAgCiAgICAgICAgLy8g5qOA5p+l5pWw5o2u5bqT6L+e5o6lCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgb3JkZXJSZXBvc2l0b3J5LmNvdW50KCk7CiAgICAgICAgICAgIGhlYWx0aC5wdXQoImRhdGFiYXNlIiwgIlVQIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaGVhbHRoLnB1dCgiZGF0YWJhc2UiLCAiRE9XTiIpOwogICAgICAgICAgICBoZWFsdGgucHV0KCJzdGF0dXMiLCAiRE9XTiIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyDmo4Dmn6Xkvp3otZbmnI3liqEKICAgICAgICB0cnkgewogICAgICAgICAgICB1c2VyU2VydmljZUNsaWVudC5nZXRVc2VyKDFMKTsKICAgICAgICAgICAgaGVhbHRoLnB1dCgidXNlci1zZXJ2aWNlIiwgIlVQIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaGVhbHRoLnB1dCgidXNlci1zZXJ2aWNlIiwgIkRPV04iKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgSHR0cFN0YXR1cyBzdGF0dXMgPSAiVVAiLmVxdWFscyhoZWFsdGguZ2V0KCJzdGF0dXMiKSkgPyAKICAgICAgICAgICAgICAgIEh0dHBTdGF0dXMuT0sgOiBIdHRwU3RhdHVzLlNFUlZJQ0VfVU5BVkFJTEFCTEU7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5LnN0YXR1cyhzdGF0dXMpLmJvZHkoaGVhbHRoKTsKICAgIH0KfQoKLy8gMTAuIERvY2tlcumDqOe9sumFjee9rgovLyBEb2NrZXJmaWxlCkZST00gb3BlbmpkazoxMS1qcmUtc2xpbQoKVk9MVU1FIC90bXAKCkNPUFkgdGFyZ2V0L29yZGVyLXNlcnZpY2UtMS4wLjAuamFyIGFwcC5qYXIKCkVYUE9TRSA4MDgwCgpFTlRSWVBPSU5UIFsiamF2YSIsICItamFyIiwgIi9hcHAuamFyIl0KCi8vIGRvY2tlci1jb21wb3NlLnltbAp2ZXJzaW9uOiAnMy44JwpzZXJ2aWNlczoKICBuYWNvczoKICAgIGltYWdlOiBuYWNvcy9uYWNvcy1zZXJ2ZXI6bGF0ZXN0CiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBNT0RFPXN0YW5kYWxvbmUKICAgIHBvcnRzOgogICAgICAtICI4ODQ4Ojg4NDgiCiAgCiAgcmVkaXM6CiAgICBpbWFnZTogcmVkaXM6YWxwaW5lCiAgICBwb3J0czoKICAgICAgLSAiNjM3OTo2Mzc5IgogIAogIHJhYmJpdG1xOgogICAgaW1hZ2U6IHJhYmJpdG1xOjMtbWFuYWdlbWVudAogICAgcG9ydHM6CiAgICAgIC0gIjU2NzI6NTY3MiIKICAgICAgLSAiMTU2NzI6MTU2NzIiCiAgCiAgdXNlci1zZXJ2aWNlOgogICAgYnVpbGQ6IC4vdXNlci1zZXJ2aWNlCiAgICBwb3J0czoKICAgICAgLSAiODA4MTo4MDgwIgogICAgZGVwZW5kc19vbjoKICAgICAgLSBuYWNvcwogICAgICAtIHJlZGlzCiAgICBlbnZpcm9ubWVudDoKICAgICAgLSBTUFJJTkdfUFJPRklMRVNfQUNUSVZFPWRvY2tlcg=="
            }
        ]
    }
];

// 导出数据
if (typeof module !== 'undefined' && module.exports) {
    module.exports = API_DEVELOPMENT_PROMPTS;
} else if (typeof window !== 'undefined') {
    window.API_DEVELOPMENT_PROMPTS = API_DEVELOPMENT_PROMPTS;
}