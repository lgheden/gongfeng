!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).QRCode=t()}(this,function(){"use strict";function e(e){return(e=e||{}).color=e.color||{},e.color.dark=e.color.dark||"#000000ff",e.color.light=e.color.light||"#ffffffff",e.margin=null==e.margin?4:e.margin,e.width=e.width||256,e.scale=e.scale||4,e}function t(e,t,r){e.path=e.path||"M0 0h"+t+"v"+r+"h-"+t+"z",e.fillRule="evenodd"}function r(e,t,r){let n=e.modules.size,o=e.modules.data,a=n+2*r,i=t*a,s=t*r,l=t*(r+n),c=t*r,u="";for(let e=0;e<a;e++){let r=e*t;if(e<s||e>=l){u+=`M0 ${r}h${i}v${t}H0z`;continue}for(let n=0;n<a;n++){let a=n*t;if(n<c||n>=c+e.modules.size||!o[e-s][n-c]){if(n<c)u+=`M${a} ${r}h${t}v${t}H${a}z`;else if(n>=c+e.modules.size)u+=`M${a} ${r}h${t}v${t}H${a}z`;continue}}}return u}function n(e,t,r){let n=e.modules.size,o=e.modules.data,a="";for(let e=0;e<n;e++)for(let i=0;i<n;i++)if(o[e][i]){let o=i*t+r,s=e*t+r;a+=`M${o} ${s}h${t}v${t}H${o}z`}return a}function o(e,t,r){let o=e.modules.size,a=e.modules.data,i=Math.floor(t/o),s=Math.floor((t-o*i)/2),l="";for(let e=0;e<o;e++)for(let t=0;t<o;t++)if(a[e][t]){let o=t*i+s,a=e*i+s;l+=`M${o},${a} h${i} v${i} H${o} z`}return l}var a=function(){var e=function(t,r){var n=e.getSymbol(t,r);return e.render(n)};return e.getSymbol=function(e,t){if(t=t||{},"string"!=typeof e)throw new Error("Expected a string");var r=t.ec_level||"M",n=t.type||"png",o=t.size||5,a=t.margin||0,i=t.customize||null;return{text:e,level:r,type:n,size:o,margin:a,customize:i}},e.render=function(e,t){t=t||{};var r=e.customize||null;return"svg"===e.type?function(e,t,r){var n=e.text,o=e.level,a=e.size,i=e.margin,s=QRCode.generate(n,{typeNumber:-1,errorCorrectLevel:o,cellSize:a,margin:i}),l=s.length,c=l*a+2*i*a,u=r&&r.background?r.background:"#FFFFFF",f=r&&r.foreground?r.foreground:"#000000",d='<svg xmlns="http://www.w3.org/2000/svg" width="'+c+'" height="'+c+'" viewBox="0 0 '+c+" "+c+'"><rect width="100%" height="100%" fill="'+u+'"/><path d="';for(var h=0;h<l;h++)for(var g=0;g<l;g++)s[h][g]&&(d+="M"+(g*a+i*a)+" "+(h*a+i*a)+"h"+a+"v"+a+"h-"+a+"z");return d+='" fill="'+f+'"/></svg>'}(e,0,r):function(e,t,r){var n=e.text,o=e.level,a=e.size,i=e.margin,s=QRCode.generate(n,{typeNumber:-1,errorCorrectLevel:o,cellSize:a,margin:i}),l=s.length,c=l*a+2*i*a,u=r&&r.background?r.background:"#FFFFFF",f=r&&r.foreground?r.foreground:"#000000",d=[];d.push("<svg xmlns='http://www.w3.org/2000/svg' width='"+c+"' height='"+c+"' viewBox='0 0 "+c+" "+c+"'>"),d.push("<rect width='100%' height='100%' fill='"+u+"'/>");for(var h=0;h<l;h++)for(var g=0;g<l;g++)s[h][g]&&d.push("<rect x='"+(g*a+i*a)+"' y='"+(h*a+i*a)+"' width='"+a+"' height='"+a+"' fill='"+f+"'/>");return d.push("</svg>"),d.join("")}(e,0,r)},e}();function i(e){this.mode=s.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var n=[],o=this.data.charCodeAt(t);o>65536?(n[0]=240|(1835008&o)>>>18,n[1]=128|(258048&o)>>>12,n[2]=128|(4032&o)>>>6,n[3]=128|63&o):o>2048?(n[0]=224|(61440&o)>>>12,n[1]=128|(4032&o)>>>6,n[2]=128|63&o):o>128?(n[0]=192|(1984&o)>>>6,n[1]=128|63&o):n[0]=o,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function s(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}i.prototype={getLength:function(){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}},s.prototype={addData:function(e){var t=new i(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=s.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=f.getLostPoint(this);(0==r||e>n)&&(e=n,t=r)}return t},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var o=0;o<this.modules.length;o++)for(var a=1*o,i=0;i<this.modules[o].length;i++){var s=1*i;this.modules[o][i]&&(n.beginFill(0,100),n.moveTo(s,a),n.lineTo(s+1,a),n.lineTo(s+1,a+1),n.lineTo(s,a+1),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=f.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],o=e[r];if(null==this.modules[n][o])for(var a=-2;a<=2;a++)for(var i=-2;i<=2;i++)this.modules[n+a][o+i]=-2==a||2==a||-2==i||2==i||0==a&&0==i}},setupTypeNumber:function(e){for(var t=f.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var o=0;o<18;o++){var a=!e&&1==(t>>o&1);this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=a}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=f.getBCHTypeInfo(r),o=0;o<15;o++){var a=!e&&1==(n>>o&1);o<6?this.modules[o][8]=a:o<8?this.modules[o+1][8]=a:this.modules[this.moduleCount-15+o][8]=a}for(var i=0;i<15;i++){var s=!e&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,o=7,a=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var s=0;s<2;s++)if(null==this.modules[n][i-s]){var l=!1;a<e.length&&(l=1==(e[a]>>>o&1)),f.getMask(t,n,i-s)&&(l=!l),this.modules[n][i-s]=l,-1==--o&&(a++,o=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},s.PAD0=236,s.PAD1=17,s.createData=function(e,t,r){for(var n=u.getRSBlocks(e,t),o=new c,a=0;a<r.length;a++){var i=r[a];o.put(i.mode,4),o.put(i.getLength(),f.getLengthInBits(i.mode,e)),i.write(o)}var s=0;for(a=0;a<n.length;a++)s+=n[a].dataCount;if(o.getLengthInBits()>8*s)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*s+")");for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(s.PAD0,8),o.getLengthInBits()>=8*s));)o.put(s.PAD1,8);return s.createBytes(o,n)},s.createBytes=function(e,t){for(var r=0,n=0,o=0,a=new Array(t.length),i=new Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,u=t[s].totalCount-c;n=Math.max(n,c),o=Math.max(o,u),a[s]=new Array(c);for(var g=0;g<a[s].length;g++)a[s][g]=255&e.buffer[g+r];r+=c;var m=f.getErrorCorrectPolynomial(u),p=new l(a[s],m.getLength()-1).mod(m);i[s]=new Array(m.getLength()-1);for(var v=0;v<i[s].length;v++){var w=v+p.getLength()-i[s].length;i[s][v]=w>=0?p.get(w):0}}var y=0;for(s=0;s<t.length;s++)y+=t[s].totalCount;var C=new Array(y),A=0;for(g=0;g<n;g++)for(s=0;s<t.length;s++)g<a[s].length&&(C[A++]=a[s][g]);for(g=0;g<o;g++)for(s=0;s<t.length;s++)g<i[s].length&&(C[A++]=i[s][g]);return C};for(var l=function(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]},c=function(){this.buffer=[],this.length=0},u={},f={},d=[],h=0;h<10;h++)d.push(0);for(h=0;h<11;h++)d.push(1);for(h=0;h<16;h++)d.push(h);for(h=0;h<40;h++)d.push(h);var g={"001":"A","010":"B","011":"C","100":"D","101":"E","110":"F","111":"G","000":"H"},m=function(e){for(var t="",r=0;r<e.length;r+=3){var n=parseInt(e.substr(r,3),2);t+=g[e.substr(r,3)]}return t};l.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=f.gexp(f.glog(this.get(r))+f.glog(e.get(n)));return new l(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var o=0;o<e.getLength();o++)r[o]^=f.gexp(f.glog(e.get(o))+t);return new l(r,0).mod(e)}},c.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(e,t){this.totalCount=e,this.dataCount=t};v.prototype={getDataCount:function(){return this.dataCount},getTotalCount:function(){return this.totalCount}},u.getRSBlocks=function(e,t){var r=u.getRsBlockTable(e,t);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,o=[],a=0;a<n;a++)for(var i=r[3*a+0],s=r[3*a+1],l=r[3*a+2],c=0;c<i;c++)o.push(new v(s,l));return o},u.getRsBlockTable=function(e,t){switch(t){case w.L:return p[4*(e-1)+0];case w.M:return p[4*(e-1)+1];case w.Q:return p[4*(e-1)+2];case w.H:return p[4*(e-1)+3];default:return}};var w={L:1,M:0,Q:3,H:2},y={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};f.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],f.G15=1335,f.G18=7973,f.G15_MASK=21522,f.getBCHTypeInfo=function(e){for(var t=e<<10;f.getBCHDigit(t)-f.getBCHDigit(f.G15)>=0;)t^=f.G15<<f.getBCHDigit(t)-f.getBCHDigit(f.G15);return(e<<10|t)^f.G15_MASK},f.getBCHTypeNumber=function(e){for(var t=e<<12;f.getBCHDigit(t)-f.getBCHDigit(f.G18)>=0;)t^=f.G18<<f.getBCHDigit(t)-f.getBCHDigit(f.G18);return e<<12|t},f.getBCHDigit=function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},f.getPatternPosition=function(e){return f.PATTERN_POSITION_TABLE[e-1]},f.getMask=function(e,t,r){switch(e){case y.PATTERN000:return(t+r)%2==0;case y.PATTERN001:return t%2==0;case y.PATTERN010:return r%3==0;case y.PATTERN011:return(t+r)%3==0;case y.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case y.PATTERN101:return t*r%2+t*r%3==0;case y.PATTERN110:return(t*r%2+t*r%3)%2==0;case y.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},f.getErrorCorrectPolynomial=function(e){for(var t=new l([1],0),r=0;r<e;r++)t=t.multiply(new l([1,f.gexp(r)],0));return t},f.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},f.getLostPoint=function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var o=0;o<t;o++){for(var a=0,i=e.isDark(n,o),s=-1;s<=1;s++)if(!(n+s<0||t<=n+s))for(var l=-1;l<=1;l++)o+l<0||t<=o+l||0==s&&0==l||i==e.isDark(n+s,o+l)&&a++;a>5&&(r+=3+a-5)}for(var c=0;c<t-1;c++)for(var u=0;u<t-1;u++){var f=0;e.isDark(c,u)&&f++,e.isDark(c+1,u)&&f++,e.isDark(c,u+1)&&f++,e.isDark(c+1,u+1)&&f++,0!=f&&4!=f||(r+=3)}for(var d=0;d<t;d++){for(var h=0,g=0;g<t;g++)e.isDark(d,g)?h++:(h>=5&&(r+=3+h-5),h=0);h>=5&&(r+=3+h-5)}for(var m=0;m<t;m++){for(var p=0,v=0;v<t;v++)e.isDark(v,m)?p++:(p>=5&&(r+=3+p-5),p=0);p>=5&&(r+=3+p-5)}var w=0;for(var y=0;y<t;y++)for(var C=0;C<t;C++)e.isDark(y,C)&&w++;return r+=10*Math.abs(Math.floor(100*w/t/t)-50)/5},f.glog=function(e){if(e<1)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},f.gexp=function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return f.EXP_TABLE[e]},f.EXP_TABLE=new Array(256),f.LOG_TABLE=new Array(256);for(var C=0;C<8;C++)f.EXP_TABLE[C]=1<<C;for(C=8;C<256;C++)f.EXP_TABLE[C]=f.EXP_TABLE[C-4]^f.EXP_TABLE[C-5]^f.EXP_TABLE[C-6]^f.EXP_TABLE[C-8];for(C=0;C<255;C++)f.LOG_TABLE[f.EXP_TABLE[C]]=C;s.MODE_NUMBER=1,s.MODE_ALPHA_NUM=2,s.MODE_8BIT_BYTE=4,s.MODE_KANJI=8;var A={toCanvas:function(t,r,n){if("function"==typeof r&&(n=r,r={}),!n)throw new Error("Callback required as last argument");if(r=e(r),!t)return void n(new Error("String required as first argument"));try{var o=function(e,t){t=t||{};var r=t.errorCorrectionLevel||"M",n=t.type||4,o=t.margin||4,a=t.scale||4,i=t.width,l=t.color||{},c=l.dark||"#000000ff",u=l.light||"#ffffffff";if("string"!=typeof e)throw new Error("Expected a string");var f=new s(-1,w[r]);f.addData(e),f.make();var d=f.modules,h=d.length,g=h+2*o;if(i){var m=Math.floor(i/g);a=m}var p=g*a,v=document.createElement("canvas");v.height=v.width=p;var y=v.getContext("2d");return y.fillStyle=u,y.fillRect(0,0,p,p),y.fillStyle=c,d.forEach(function(e,t){e.forEach(function(e,r){e&&y.fillRect((r+o)*a,(t+o)*a,a,a)})}),v}(t,r);n(null,o)}catch(e){n(e)}},toString:function(t,r,n){if("function"==typeof r&&(n=r,r={}),!n)throw new Error("Callback required as last argument");return A.toSVG(t,r,n)},toSVG:function(a,i,s){if("function"==typeof i&&(s=i,i={}),!s)throw new Error("Callback required as last argument");if(i=e(i),!a)return void s(new Error("String required as first argument"));try{var l,c,u,f=function(e,a){a=a||{};var i=a.errorCorrectionLevel||"M",l=a.type||4,c=a.margin||4,u=a.scale||4,f=a.width,d=a.color||{},h=d.dark||"#000000ff",g=d.light||"#ffffffff";if("string"!=typeof e)throw new Error("Expected a string");var m=new s(-1,w[i]);m.addData(e),m.make();var p=m.modules,v=p.length,y=v+2*c;if(f){var C=Math.floor(f/y);u=C}var A=y*u,B={modules:{size:v,data:p},size:A,margin:c*u,scale:u,color:{dark:h,light:g}};return B}(a,i);l=f.size,c=f.margin,u=f.color.light;var d=f.color.dark,h='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+l+" "+l+'" width="'+l+'" height="'+l+'"><rect fill="'+u+'" width="'+l+'" height="'+l+'"/><path fill="'+d+'" d="';h+=i.small?n(f,f.scale,c):r(f,f.scale,c),h+='" shape-rendering="crispEdges"/></svg>',s(null,h)}catch(e){s(e)}},toDataURL:function(e,t,r){"function"==typeof t&&(r=t,t={}),r&&A.toCanvas(e,t,function(e,t){if(e)return r(e);var n=t.toDataURL();r(null,n)})}};return A});